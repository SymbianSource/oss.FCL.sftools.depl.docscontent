<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2007-2010 Nokia Corporation and/or its subsidiary(-ies) All rights reserved. -->
<!-- This component and the accompanying materials are made available under the terms of the License 
"Eclipse Public License v1.0" which accompanies this distribution, 
and is available at the URL "http://www.eclipse.org/legal/epl-v10.html". -->
<!-- Initial Contributors:
    Nokia Corporation - initial contribution.
Contributors: 
-->
<!DOCTYPE concept
  PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept xml:lang="en" id="GUID-2D74594C-AFEB-550E-AD69-1C4A0455C5AC"><title>Structure of a Message Store</title><prolog><metadata><keywords/></metadata></prolog><conbody><p>This section provides information about the Message Store entries. </p> <p>Message Framework provides a tree view of entries in a Message Store. The tree is divided into three levels: root entry, service entry, and folder and message entry, which are provided <xref href="GUID-5A23B804-2C06-3407-9D48-1BFB212D699F.dita"><apiname>TMsvEntry</apiname></xref>. The child entries of the root entry must be service entries. A message client application can begin from the root entry, and by successively finding the children of an entry, can traverse the whole entry tree. The parent of each entry is recorded in the index entry's details. </p> <p>The following figure illustrates how services are placed below a root entry. </p> <fig id="GUID-7832A21A-381A-5B5B-96ED-CF238039944F"><title>
          Message Store 
        </title> <image href="GUID-95580D64-315E-51E8-99C3-6C0B8FFF1522_d0e282710_href.png" placement="inline"/></fig> <ul><li id="GUID-C5AE5A9E-F382-5D56-9EE3-C70C338E2D02"><p> <b>1:</b>  <b>Root entry</b> —This entry is just present to tie the tree structure together. </p> </li> <li id="GUID-F88FF1E1-D679-5413-BEE8-1574C54C9754"><p> <b>2:</b> <b> Service entry</b> —This level used for settings information, usually to set up communication protocols, for example, ISP settings. There is one local service under which local folders and messages are stored, and zero or more remote services. Remote services represent message accounts. </p> <p>There are two types of service entry: </p> <ul><li id="GUID-34454E69-A768-5102-84CD-D2F172C00BBE"><p> <b>Remote Services:</b> These represent message accounts stored on remote stores such as email servers and the SIM store of SMS messages. </p> </li> <li id="GUID-F4284F86-B486-5056-A3D9-681F07407112"><p> <b>Local Services:</b> There is a single local service under which local folders and messages are stored. </p> <p>The Message Server handles changes to local entries. Internally it may delegate changes to remote entries, such as copying and moving messages to and from a remote service, to the server MTM that owns that service. </p> </li> </ul> <fig id="GUID-E2FBA9E3-6AFB-56F4-A2B4-45FE4E41A024"><title>
                Remote and local entries 
             </title> <image href="GUID-19B2E0BF-9766-55C6-A37F-188A9EDAFF39_d0e282762_href.png" placement="inline"/></fig> </li> <li id="GUID-035D9E45-6546-5551-91FF-214AE81DCEE7"><p> <b>3: </b> <b> Folder entries and message entries</b> — Folders entries are used to group a number of message entries. For more information on folders, see <xref href="GUID-21C03739-FF80-5874-A32B-F22DED13D18D.dita">Message folders</xref>. Messages store the content of a message. Message entries can have child entries which represent the structure of a message. </p> <p>Folders and messages under the local service represent messages stored on the device. Folders and messages under remote services represent a local copy of messages that are present on a remote server. For example, under a POP3 email service you can have copies of all the messages present on the POP3 email server, and under an SMS service you can have SMS messages that are stored on a SIM. </p> <p>Each message entry also has an associated service ID. The service ID is associated with a service entry whose settings is used in all Messaging operations on that message entry. </p> </li> </ul> <section><title>Validity of the Message Store</title> <p>The structure of the Message store is considered to be valid only if an index entry conforms to the following rules: </p> <ul><li id="GUID-7DB69487-9E0B-5D8F-BD7A-83A62F1BF4D2"><p>A non-service entry cannot be owned by root and must have its service ID field set. </p> </li> <li id="GUID-207256FE-42CB-56D3-9008-DB8B8F3A3171"><p>A service entry must be owned by root and have the service ID of itself. </p> </li> </ul> <p> <b>Important:</b> The Message Server controls access to the entries in the store. It enforces the three levels; therefore, attempts to create message or folder entries directly under the root entry fails. </p> </section> </conbody><related-links><link href="GUID-B394A824-8745-505E-8429-8B9B6D418387.dita"><linktext>Message Server and Store</linktext> </link> <link href="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.dita"><linktext> Messaging Framework</linktext> </link> <link href="GUID-44CF5471-564E-5790-935B-51193A4978D6.dita"><linktext>Message Server and Store
                Concepts</linktext> </link> <link href="GUID-DD27A452-8B0F-5C6D-A2E6-FC21145468B6.dita"><linktext>Message Server and Store
                Tutorials</linktext> </link> </related-links></concept>