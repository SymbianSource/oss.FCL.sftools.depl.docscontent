<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2007-2010 Nokia Corporation and/or its subsidiary(-ies) All rights reserved. -->
<!-- This component and the accompanying materials are made available under the terms of the License 
"Eclipse Public License v1.0" which accompanies this distribution, 
and is available at the URL "http://www.eclipse.org/legal/epl-v10.html". -->
<!-- Initial Contributors:
    Nokia Corporation - initial contribution.
Contributors: 
-->
<!DOCTYPE concept
  PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept xml:lang="en" id="GUID-A467E933-C4B4-5518-96D6-471E44B216B3"><title> Advanced Pond Guide</title><shortdesc>This topic describes Comms ponds in more detail. </shortdesc><prolog><metadata><keywords/></metadata></prolog><conbody><section id="GUID-504F0262-7142-5AE0-8E56-675028D7711B"><title>APIs</title> <p>The following diagram is a partial representation of the class relationships for <xref href="GUID-F5B96520-E8A6-3775-9059-DF5A1668043B.dita"><apiname>RCommsBufPond</apiname></xref>. </p> <fig id="GUID-ECAD1BBF-7319-53E5-9719-0BEEE52CFC0D"><title>
             Comms pond 
          </title> <image href="GUID-581FB79B-2DB9-5AB8-AB32-997B05A62070_d0e107302_href.png" placement="inline"/></fig> <p> </p> <p>An <xref href="GUID-F5B96520-E8A6-3775-9059-DF5A1668043B.dita"><apiname>RCommsBufPond</apiname></xref> instance manages a number of memory pools. Each pool contains buffers of identical size. </p> <p>The Comms Data Plane uses chains of buffers to transfer data up and down the stack. For more information about buffers and chains, see <xref href="GUID-B4F15CA3-CAD4-5A87-9610-A656CA337B72.dita">Comms Buffers (MBuf) and Comms Chains</xref>. </p> </section> <section id="GUID-7BA25CFC-91A4-5A72-A281-FE1CD89179A1"><title>Lifecycle</title> <ol id="GUID-FC7EDD22-6ADB-566F-9DD0-C2B001B86474"><li id="GUID-A0EA1F6F-2E8C-5A0E-AACB-AF799D3B6B27"><p> <codeph>c32start.exe</codeph> reads the pond configuration stored in the <codeph>c32start.ini</codeph> file (see <xref href="GUID-6FEE5676-8BFB-53E6-A652-7178295C342E.dita">Pond Configuration Reference</xref>). </p> </li> <li id="GUID-8DF535A1-CE52-575A-85A1-4A88DC275E6C"><p> <codeph>c32start.exe</codeph> provides the configuration information to the Root Server when initializing it. For more information about the C32 process, see <xref href="GUID-2FED5145-58E4-5560-8E52-6BD499EECE13.dita">Root Server</xref>. </p> </li> <li id="GUID-7D3ED0BE-2616-53A2-9F75-EA3FB491586B"><p>The Root Server creates the pond with the specified pools. </p> </li> <li id="GUID-B9989E00-6052-5D0E-B273-69FDF36C4A74"><p>The Root Server puts the pond handle in the TLS of each thread in <codeph>c32exe.exe</codeph> (see <xref href="GUID-F2E86FB3-C634-5CF9-87B2-EAB18BF25C4B.dita">TLS Look-up Reduction Tutorial</xref>). </p> </li> </ol> <fig id="GUID-7DB5C332-6F20-5C84-892A-FBEE2B7A6F25"><image href="GUID-6E3AF264-6149-51FA-BBA0-68E2DB679048_d0e107369_href.png" placement="inline"/></fig> </section> </conbody><related-links><link href="GUID-55E4D84B-1B90-5BA4-9CE0-6D26EA208F13.dita"><linktext>Overview</linktext> </link> <link href="GUID-B4F15CA3-CAD4-5A87-9610-A656CA337B72.dita"><linktext>Comms Buffers (MBuf)
                and Comms Chains</linktext> </link> <link href="GUID-6FEE5676-8BFB-53E6-A652-7178295C342E.dita"><linktext>Pond Configuration
                Reference</linktext> </link> </related-links></concept>