<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2007-2010 Nokia Corporation and/or its subsidiary(-ies) All rights reserved. -->
<!-- This component and the accompanying materials are made available under the terms of the License 
"Eclipse Public License v1.0" which accompanies this distribution, 
and is available at the URL "http://www.eclipse.org/legal/epl-v10.html". -->
<!-- Initial Contributors:
    Nokia Corporation - initial contribution.
Contributors: 
-->
<!DOCTYPE reference
  PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference xml:lang="en" id="GUID-746866CE-809A-5598-BA60-2947763E5EE9"><title>Network Privacy API Reference</title><shortdesc>This section describes the dynamic behaviour of the Network Privacy API using a set of sequence diagrams. </shortdesc><prolog><metadata><keywords/></metadata></prolog><refbody><section><title>Sequence diagrams</title> <p>The sequence diagrams in this section describe the behaviour of the Network Privacy API when a licensee has installed and configured a Privacy Controller, Privacy Notifiers or Privacy Q&amp;N Notifiers. </p> <p><b>Startup and shutdown sequences</b> </p> <p>The sequence diagrams in this section describe how the LBS subsystem starts up and shuts down when LBS is built to include a Privacy Protocol Module and privacy requests are received via the Network Privacy API. </p> <p id="GUID-5F4DEA15-5950-54CA-9F24-58BDB1401564"><b> Startup sequence </b> </p> <p>The first request sent into the LBS subsystem via the Network Privacy API starts the subsystem, as shown in figure 1.1 (which shows startup of a licensee Privacy Controller). </p> <fig id="GUID-4FFD0AE1-4B8F-5370-A04C-E65BB0E8E36E"><title>
                  Figure 1.1. LBS startup. 
                </title> <image href="GUID-C60254EC-85B4-52A9-A694-A5F6EA0B1DAF_d0e455721_href.png" placement="inline"/></fig> <p id="GUID-DBDFD026-26C9-5944-B590-919C00888FAA"><b>Shutdown sequence </b> </p> <p>The LBS subsystem is shutdown either: </p> <ul><li id="GUID-0EE9467B-8DFC-58E9-B336-2E1BDC46ED83"><p>When the licensee Network Privacy API client closes its connection and calls the <codeph>CPosNetworkPrivacy</codeph> destructor </p> </li> <li id="GUID-A335193A-BE52-5388-811A-700A9493DBC2"><p>When a timer expires after the last request is completed </p> </li> </ul> <p>Figure 1.2 shows LBS shutdown for the two cases. </p> <fig id="GUID-45809C4C-0850-53F5-97AD-F770BF026F2B"><title>
                  Figure 1.2. LBS shutdown 
                </title> <image href="GUID-323A76FE-3147-5E54-9282-B80D30246D8F_d0e455753_href.png" placement="inline"/></fig> <p id="GUID-701C37DC-C7A3-56B6-9260-A10EB0590C53"><b>Privacy Controller sequences</b> </p> <p>The sequence diagrams in this section illustrate the behaviour of the Network Privacy API when a licensee has installed and configured a privacy controller. </p> <p id="GUID-EB551098-22CD-5BAA-9CD7-7E783E9EDC60"><b>Privacy verification with a Privacy Controller (request accepted, rejected or timeout) </b> </p> <p>Figure 2.1 shows privacy verification with a Privacy Controller. </p> <fig id="GUID-36ADDF91-80B2-5333-8B1C-CE79FD970CD7"><title>
                  Figure 2.1 Privacy verification with a Privacy Controller. 
                </title> <image href="GUID-5D5CCF46-0FB4-57DA-B32D-C2C7F86FAD30_d0e455775_href.png" placement="inline"/></fig> <p id="GUID-F6D7293D-D78E-5646-8C5C-8706390C15F6"><b>Privacy notification with a Privacy Controller </b> </p> <p>Figure 2.2 shows location notification with a Privacy Controller. </p> <fig id="GUID-F5A74FD6-68CB-56AF-9E8C-EA405C83C59F"><title>
                  Figure 2.2 Privacy notification with a Privacy Controller. 
                </title> <image href="GUID-6E82BAAC-64B4-59F7-81AC-CF4C76445935_d0e455789_href.png" placement="inline"/></fig> <p id="GUID-E7EE48C9-7C79-549D-A50C-B2D197C1A00C"><b>Privacy verification cancelled with a Privacy Controller</b> </p> <p>Figure 2.3 shows a privacy verification cancelled with a Privacy Controller. </p> <fig id="GUID-AA37A857-C6F3-5E7B-B4A1-DA640ADC1C91"><title>
                  Figure 2.3. Privacy verification cancelled with Privacy
                  Controller. 
                </title> <image href="GUID-BE2497DB-999F-5CF8-88E1-A94E8084C841_d0e455803_href.png" placement="inline"/></fig> <p id="GUID-76311BE7-5370-5154-93E3-83D0B70CE747"><b>Timeout notification with a Privacy Controller</b> </p> <p>Figure 2.4 shows a timeout notification with a Privacy Controller. </p> <fig id="GUID-595AC5CD-5B5F-52FF-9B4B-D6386DAD98F9"><title>
                  Figure 2.4. Timeout notification with a Privacy Controller. 
                </title> <image href="GUID-B9347C4E-8121-57F5-8040-87B5D58C0FC4_d0e455817_href.png" placement="inline"/></fig> <p id="GUID-6F7FF3CF-5085-5389-952F-8FF3519A3934"><b>Privacy Notifier sequences</b> </p> <p>The sequence diagrams in this section illustrate the behaviour of the Network Privacy API when a licensee has installed and configured privacy notifiers. </p> <p id="GUID-7423EDC0-211C-570B-AB38-E1F4ACE09FF6"><b>Privacy verification with a Privacy Notifier (request accepted, rejected or timeout)</b> </p> <p>Figure 3.1 shows verification of a privacy request with a Privacy Notifier. </p> <fig id="GUID-61A79912-AC67-5A8D-BB06-7B42E975F70D"><title>
                  Figure 3.1. Privacy verification with a Privacy Notifier. 
                </title> <image href="GUID-166BB47B-3E5A-56C6-8FBE-0D71924C11DF_d0e455839_href.png" placement="inline"/></fig> <p id="GUID-E30DD134-369C-5B2B-9BAE-E85BF82B56D1"><b>Privacy notification with a Privacy Notifier</b> </p> <p>Figure 3.2 shows location notification with a Privacy Notifier. </p> <fig id="GUID-A23A0AF9-AAC4-50AA-9513-8E3C49FABE78"><title>
                  Figure 3.2. Privacy notification with a Privacy Notifier. 
                </title> <image href="GUID-EDAF82B1-C388-5F57-890F-68010A6E5800_d0e455853_href.png" placement="inline"/></fig> <p id="GUID-CFCC58C0-2D8B-5F6B-BFC0-FF21788A885B"><b>Privacy verification cancelled with Privacy Notifier</b> </p> <p>Figure 3.3 shows a privacy verification cancelled with a Privacy Notifier. </p> <fig id="GUID-6DF4CCE0-4782-56A0-A05F-90ADEDED0583"><title>
                  Figure 3.3. Privacy verification cancelled with Privacy Notifier.
                  
                </title> <image href="GUID-FD49B745-965F-5CC6-A9FC-D950FDEB00FD_d0e455867_href.png" placement="inline"/></fig> <p id="GUID-6A654A40-5B6E-517C-8315-193FA05D1AD4"><b>Timeout notification with Privacy Notifier</b> </p> <p>Figure 3.4 shows a timeout notification with a Privacy Notifier. </p> <fig id="GUID-C26BC778-3BC0-5C15-B8A3-07A2E1D80A6A"><title>
                  Figure 3.4. Timeout notification with a Privacy Notifier. 
                </title> <image href="GUID-AD4F041B-4115-5ABE-8909-44156621DF72_d0e455881_href.png" placement="inline"/></fig> <p id="GUID-F0D8A696-CDDF-5CB1-9650-8D3CB075F95C"><b>Privacy Q&amp;N Notifier sequences</b> </p> <p>The sequence diagrams in this section illustrate the behaviour of the Network Privacy API when a licensee has installed and configured privacy Q&amp;N notifiers. </p> <p id="GUID-139976F1-74CB-5024-8A13-449960E8C02D"><b> Privacy verification with a Privacy Q&amp;N notifier (request accepted, rejected or timeout) </b> </p> <p>Figure 4.1 shows verification of a privacy request with a Privacy Q&amp;N notifier. </p> <fig id="GUID-EEC1CC7C-8F2A-5700-852A-2AECC8103FDF"><title>
                  Figure 4.1. Privacy verification with a Q&amp;N Privacy Notifier.
                  
                </title> <image href="GUID-91D598C7-1420-5C7C-A440-95F679F38F6D_d0e455903_href.png" placement="inline"/></fig> <p id="GUID-0E1A52B0-38FA-5B8D-8B01-798BFF708DEF"><b>Privacy notification with a Privacy Q&amp;N notifier </b> </p> <p>Figure 4.2 shows a privacy notification with a Privacy Q&amp;N notifier. </p> <fig id="GUID-C1790970-C843-50AB-A563-B33173178CBA"><title>
                  Figure 4.2. Privacy notification with a Privacy Q&amp;N Notifier.
                  
                </title> <image href="GUID-1B96241D-1914-5754-BB4F-954778CE342C_d0e455917_href.png" placement="inline"/></fig> <p id="GUID-817261D3-A1B1-54D3-BB21-B96DE741DF53"><b>Privacy verification cancelled with Privacy Q&amp;N notifier</b> </p> <p>Figure 4.3 shows a privacy verification cancelled with a Privacy Q&amp;N notifier. </p> <fig id="GUID-4862C52C-379D-5914-9BBC-F924DD9921FE"><title>
                  Figure 4.3. Privacy verification cancelled with Privacy Q&amp;N
                  Notifier. 
                </title> <image href="GUID-97F4C412-5831-5735-9209-D81B4634D4F3_d0e455931_href.png" placement="inline"/></fig> <p id="GUID-4084CA03-A311-5053-BC77-2229E4C6EF5B"><b>Timeout notification with Privacy Q&amp;N notifier</b> </p> <p>Figure 4.4 shows a timeout notification with a Privacy Q&amp;N notifier. </p> <fig id="GUID-0B4C0D84-0E54-585B-A8B1-9BB2B4B7C30C"><title>
                  Figure 4.4. Timeout notification with a Privacy Q&amp;N Notifier.
                  
                </title> <image href="GUID-AC3A531E-C6D7-5F04-B8FB-35B37FB01A14_d0e455945_href.png" placement="inline"/></fig> </section> </refbody><related-links><link href="GUID-0BF06E5D-BEEF-5E15-894E-FA605FA12E33.dita"><linktext>Privacy
                Protocol Module Overview</linktext> </link> <link href="GUID-B3000A78-3BE5-5E0A-A718-87BC9BA03726.dita"><linktext>Network
                Privacy API</linktext> </link> </related-links></reference>