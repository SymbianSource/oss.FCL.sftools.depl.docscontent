<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2007-2010 Nokia Corporation and/or its subsidiary(-ies) All rights reserved. -->
<!-- This component and the accompanying materials are made available under the terms of the License 
"Eclipse Public License v1.0" which accompanies this distribution, 
and is available at the URL "http://www.eclipse.org/legal/epl-v10.html". -->
<!-- Initial Contributors:
    Nokia Corporation - initial contribution.
Contributors: 
-->
<!DOCTYPE concept
  PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept xml:lang="en" id="GUID-2C8653F9-8873-59E8-9FD2-4215F6877ABC"><title>Chunk Method to Process Emails</title><prolog><metadata><keywords/></metadata></prolog><conbody><p>This section describes the chunk method to process email messages. </p> <p>From Symbian OS v9.4 onwards, POP3 and IMAP email MTMs can use the plain text format for storing email messages (in addition to rich text format). The entire email message is not created in the RAM. Only chunks of the message are stored in the RAM at a time, as writing or reading is done asynchronously. This decreases RAM usage and increases the performance of downloading and storing email messages. </p> <p>The <xref href="GUID-8CB90FA2-A6CF-3FA2-81FF-7D22EFD9C2CE.dita"><apiname>CMsvStore</apiname></xref> class is modified with the following APIs to enable chunk method: </p> <ul><li id="GUID-05C1BD14-71AF-5C19-B102-CBA638F42387"><p> <xref href="GUID-6A4CAFB0-262A-3721-B91B-07F2C3B64B5F.dita"><apiname>CMsvPlainBodyText</apiname></xref>  </p> </li> <li id="GUID-0D8AC776-1B7F-53A0-A3F1-0BC5160AA301"><p> <xref href="GUID-14EA98A8-06E7-33FF-B2B1-4BC3D044518D.dita"><apiname>CImPlainBodyText</apiname></xref>  </p> </li> </ul> <section><title>Description</title> <p>A chunk is a substantial amount of an encapsulated email message that is processed in plain text format. The following table provides the default chunk size value that you can have for POP, IMAP, and SMTP. </p> <table id="GUID-039DB124-DF1F-5362-A515-2DD70CF05F70"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>Protocol</entry> <entry>Default chunk size</entry> </row> </thead> <tbody><row><entry><p>POP </p> </entry> <entry><p>2000 bytes </p> </entry> </row> <row><entry><p>IMAP </p> </entry> <entry><p>20480 bytes </p> <p>You can modify this value using the <xref href="GUID-C3A55E4C-EA56-35E9-A522-7570161FEA54.dita"><apiname>KImapDefaultFetchSizeBytes</apiname></xref> parameter. </p> </entry> </row> <row><entry><p>SMTP </p> </entry> <entry><p>2000 bytes </p> </entry> </row> </tbody> </tgroup> </table> <p>The chunk method enables you to limit the need for outbound buffering of an email message in RAM on the client side. It modifies (breaks) the body of a message in order to transfer it as a series of chunks. Each chunk contains a size indicator, followed by a flag that contains entity-header fields, which can be used by the recipient to verify if the email message received is complete or partial. </p> <p>The method of processing email messages in chunks (plain text format) is provided in addition to processing email messages in rich text format. Licensees can choose the type of configuration to store and/or restore email messages. If this mechanism is not configured, email messages are stored and/or restored in the rich text format. </p> </section> <section><title>Configuring the IMCM.rss file</title> <p>Set the <codeph>store_plain_body_text</codeph> field to any of the following values at the client-side. This value is used to configure the IMAP and POP3 MTMs to decide the type of storage to be used for storing email messages. </p> <ol id="GUID-6FB0DAA4-3AD6-5227-A38F-877E27AB4C4F"><li id="GUID-E962A61B-4862-5190-AABA-F7D35A6906E8"><p>Locate the <filepath>IMCM.rss</filepath> file at the <filepath>messaging\email\clientmtms\group</filepath> location. </p> </li> <li id="GUID-DE8D48DD-2090-5A92-860D-31954E2B6C23"><p>Set the value of the <codeph>store_plain_body_text</codeph> field to any of the following values: </p> <table id="GUID-C0497074-D326-5DF7-AF7B-7CA370C5676D"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>Value</entry> <entry>Description</entry> </row> </thead> <tbody><row><entry><p> <codeph>1</codeph>  </p> </entry> <entry><p>To store the body text of an email message in chunks when messages are downloaded through IMAP and POP3. </p> <p>This is the default value. </p> </entry> </row> <row><entry><p> <codeph>0</codeph>  </p> </entry> <entry><p>To store the entire body text of an email message in the RAM when messages are downloaded through IMAP and POP3. </p> </entry> </row> </tbody> </tgroup> </table> </li> </ol> </section> </conbody><related-links><link href="GUID-6FE94423-9563-5F31-95EB-504479144B05.dita"><linktext>Storing and Restoring Email Messages in Chunks
                </linktext> </link> <link href="GUID-9A3E0279-4F87-594D-A987-66DC77F408A0.dita"><linktext> Creating and Reading Emails in Chunks </linktext> </link> </related-links></concept>