<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2007-2010 Nokia Corporation and/or its subsidiary(-ies) All rights reserved. -->
<!-- This component and the accompanying materials are made available under the terms of the License 
"Eclipse Public License v1.0" which accompanies this distribution, 
and is available at the URL "http://www.eclipse.org/legal/epl-v10.html". -->
<!-- Initial Contributors:
    Nokia Corporation - initial contribution.
Contributors: 
-->
<!DOCTYPE concept
  PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept xml:lang="en" id="GUID-319C8CF8-D49B-5157-A133-3070C70C7AE0"><title>Envelope Command Tutorial</title><shortdesc>This tutorial describes how to use the envelope commands for the SIM Application Toolkits. </shortdesc><prolog><metadata><keywords/></metadata></prolog><conbody><p>The envelope commands are useful in the communication between the SAT engine and SAT applications in the ICC. </p> <section><title>Procedure</title> <ol id="GUID-13D11C18-A2AB-5BDA-B1D3-4287ACFDD167"><li id="GUID-A45EEB25-0AA7-51C7-B8D6-D1A923112CE6"><p>Use <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>GetMeSideSatProfile()</apiname></xref> to get the supported SAT features by the device. </p> <p>The SAT engine must call <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>ClientSatprofileIndicator()</apiname></xref> to get the features supported by the SAT applications. The SAT profile is passed between the SAT applications and SAT engine in a <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>TSatProfileV6</apiname></xref> object. </p> </li> <li id="GUID-7A34A2A4-A686-516F-B058-963A768AE59A"><p>Use <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>MenuSelection()</apiname></xref> to send the menu item selected by the user in the device . </p> <p>The SAT engine displays the options to the user and when the user selects an option the menu item is sent to the SAT applications in the ICC. The menu item information is sent in a <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>TMenuSelectionV1</apiname></xref> object. </p> </li> <li id="GUID-6A8CCD2C-BB43-54C8-88C4-64EC798C3C7E"><p>Use <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>NotifyCallControlRequest()</apiname></xref> to get the notifications of any changes made to a call or a Packet Data Protocol (PDP) context by the SAT applications in the ICC. The call and PDP context are for outbound connections. </p> <p>The TSY returns the call control information in a <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>TCallControlV2</apiname></xref> descriptor for the changes made by a call. The call control information is returned in a <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>TCallControlV5</apiname></xref> descriptor for the changes made by a PDP context. <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>TCallControlV6</apiname></xref> has a parameter to specify the originator of the call. </p> </li> <li id="GUID-EE83E42A-5BCC-5CB6-9AAB-05CD05EE268D"><p>Use <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>NotifyMoSmControlRequest()</apiname></xref> to get the notification of any changes made to an outbound SMS by the SAT applications. </p> <p>The SAT engine requests the TSY to send SMS. The SAT applications process the SMS details before it sent to the network. The SAT engine is notified of any changes to the SMS by the ICC. It is similar to the call control mechanism but there is no get and set methods for Mobile Originated Short Message (MO-SM). The TSY returns the modified details using <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>TMoSmControlV1</apiname></xref>  </p> </li> <li id="GUID-D333F68B-9E49-50EB-96A4-FC191691EB3B"><p>Use <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>EventDownload()</apiname></xref> to notify the ICC of any changes in the activities like user activity, idle screen, card reader status, language selection, browser termination, data available, channel status, local connection or display parameters. </p> <p>The event download information is sent in a <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>TEventDownloadBaseV2</apiname></xref> object. </p> </li> <li id="GUID-1B6131DC-A14E-5AC7-972E-BDE576767536"><p>Use <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>MmsNotificationDownload()</apiname></xref> to download a multimedia message when available. </p> <p>The envelope command information is sent to the ICC in a <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>TMMSNotificationDownloadV6</apiname></xref> object. When the download is completed the ICC tells the TSY. The envelope command contains the ID of the network and the device. The message is downloaded from the network with the <codeph>NetworkControl</codeph> capability. </p> </li> <li id="GUID-36CB544C-9760-58EF-B972-B0D413E96312"><p>Use <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>MmsTransferStatus()</apiname></xref> to send the status of a multimedia message to the ICC. </p> <p>The SAT engine notifies the ICC when a multimedia message is sent or received. The status information is sent to the ICC in a <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>TMmsTransferStatusV6</apiname></xref> object. </p> </li> <li id="GUID-5DC51B7C-82B6-5956-9576-C1A7E9A7F1AD"><p>Use <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>NotifyUssdDataDownload()</apiname></xref> to request the TSY to download an Unstructured service data (USSD) data from the network in the application mode. </p> <p>The envelope command information is sent to the ICC in a <xref href="GUID-10B2C9F7-ABBF-33E8-8B89-6D170E21293C.dita"><apiname>TUssdDataDownloadV6</apiname></xref> object. </p> </li> </ol>  </section> <section><title>See also</title> <p> <xref href="GUID-9BD11817-54AC-5731-98EC-91B0C8686847.dita">What Are Envelope Commands</xref>  </p> </section> </conbody></concept>