<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2007-2010 Nokia Corporation and/or its subsidiary(-ies) All rights reserved. -->
<!-- This component and the accompanying materials are made available under the terms of the License 
"Eclipse Public License v1.0" which accompanies this distribution, 
and is available at the URL "http://www.eclipse.org/legal/epl-v10.html". -->
<!-- Initial Contributors:
    Nokia Corporation - initial contribution.
Contributors: 
-->
<!DOCTYPE concept
  PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept xml:lang="en" id="GUID-6A3D678C-D075-5932-8B87-DC4D283F0E55"><title>Preparing Media Card for Installing Preinstalled Packages or Patch</title><shortdesc>Device creators can preinstall packages on a media card. When this media card is inserted into a Symbian device for the first time, an installation takes place. That is, unlike a standard installation, this only involves validating the package and updating the SIS registry. Files are not copied to the Symbian device. </shortdesc><prolog><metadata><keywords/></metadata></prolog><conbody><section><title>Procedure</title> <p>You can prepare a media card for installing preinstalled packages in either of the following ways: </p> <ul><li id="GUID-B438FDC5-1FF9-5F1B-B3DD-9394BF66EAF2"><p>Create a Stub SIS file and place it in the media card. </p> <ol id="GUID-63F73329-92F1-59D1-B9E3-DDA91B08DF0A"><li id="GUID-E7AC1FA7-01BF-5E2D-9346-9E953BE466B8"><p>Create a PKG file of type <codeph>PA</codeph> (Preinstalled Application) or PP (Preinstalled Patch). </p> <p>The PKG file must include the <xref href="GUID-FF39192E-9C93-593F-8F47-DB18DB876F6F.dita">installation file</xref> sections that lists all executables and data files. The source filenames are not relevant and can consist of empty quotes. The <codeph>!</codeph> character must be used as the target drive letter for all files. </p> <p> <b>Note:</b> Any <codeph>FILERUN</codeph> (<codeph>FR</codeph>), <codeph>FILEMIME</codeph> (<codeph>FM</codeph>) or <codeph>FILETEXT</codeph> (<codeph>FT</codeph>) statements in the installation package for a preinstalled application are ignored by the software installer. </p> </li> <li id="GUID-9776018C-19C0-5B4D-A124-6073D7964A30"><p>Run the <xref href="GUID-4BDC9F63-83A1-53A5-91A0-B092AA821755.dita">MakeSIS</xref> tool using the <codeph>-s</codeph> option and specify the PKG file as input. </p> <p>For example: </p> <p><userinput>makesis -s simple.pkg</userinput> </p> <p>This produces a Stub SIS file. </p> </li> <li id="GUID-3C5DEBF4-E9A3-5104-803D-E68ACB7E8593"><p>Add the Stub SIS file to the <b>\private\10202DCE\</b> folder in the media card. This facilitates its detection by the default background process that monitors the media card insertion. </p> <p> <b>Note</b>: Device creators can implement their own version of this process. This allows the Stub SIS file to be located in a different location. </p> </li> <li id="GUID-C8817396-2435-5C90-936F-2472710937B2"><p>Add the executables and data files to the private folder in the media card. </p> </li> </ol> </li> <li id="GUID-1A80EF12-4228-54F9-8F1B-6C445C4CA971"><p>Preinstall SIS files on the media card using the <codeph>InterpretSIS</codeph> tool. </p> <p>Run InterpretSIS at the command prompt and specify the arguments as shown in the following example </p> <p><userinput>interpretsis &lt;options&gt; â€“s &lt;file.sis&gt; [+&lt;drive&gt;] [+mcard | +mcardalone | +mcardnr | +mcardalonenr]</userinput> </p> <p>For more information on the arguments used, see <xref href="GUID-8792CCC3-B70F-53FC-B394-B0069AF90349.dita">InterpretSIS</xref>. </p> <p> <b>Note:</b> The drive must be defined as an external type in the configuration file for package propagation to be possible. Else, the stub SIS file is not generated. <codeph>InterpretSIS</codeph> returns an error. </p> </li> </ul> </section> </conbody><related-links><link href="GUID-0250833D-7358-57AB-8CB8-956DF4310EFA.dita"><linktext>Software
                Installation on a Media Card</linktext> </link> <link href="GUID-958C0C9A-176D-54D6-B484-11C238F3B73D.dita"><linktext>Stray Packages</linktext> </link> <link href="GUID-8792CCC3-B70F-53FC-B394-B0069AF90349.dita"><linktext>InterpretSIS</linktext> </link> </related-links></concept>