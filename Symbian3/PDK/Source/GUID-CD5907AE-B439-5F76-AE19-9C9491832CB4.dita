<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2007-2010 Nokia Corporation and/or its subsidiary(-ies) All rights reserved. -->
<!-- This component and the accompanying materials are made available under the terms of the License 
"Eclipse Public License v1.0" which accompanies this distribution, 
and is available at the URL "http://www.eclipse.org/legal/epl-v10.html". -->
<!-- Initial Contributors:
    Nokia Corporation - initial contribution.
Contributors: 
-->
<!DOCTYPE concept
  PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept xml:lang="en" id="GUID-CD5907AE-B439-5F76-AE19-9C9491832CB4"><title>System Upgrades</title><prolog><metadata><keywords/></metadata></prolog><conbody><p>System Upgrade (SU) packages enable the device creators to overcome the restriction of using a Stub SIS file in the ROM for eclipsing. </p> <p>A System Upgrade package is a package that has the <codeph>RU</codeph> flag set and is signed by a certificate that is chained to a root certificate with the System Upgrade (<codeph>SU</codeph>) flag enabled. This means that the upgrade package is as trusted as the base package. </p> <p>The use of System Upgrade packages allows device creators to: </p> <ul><li id="GUID-7DB16AD4-7666-5F76-83E5-1F710F713EE5"><p>Solve system software problems at device build time. </p> </li> <li id="GUID-D210115C-9B31-55D1-A164-C7F5BA7667CB"><p>Eclipse the <b>Z</b> drive files that are owned by other ROM Stub SIS files. </p> <p> <b>Note</b>: To avoid possible problems for later upgrades of the ROM stub, it is important to track the stubs while preparing the eclipsing system upgrade packages. </p> </li> <li id="GUID-00400002-FB4F-5B93-903E-56FA932D919B"><p>Overwrite files owned by other packages when installing System Upgrade packages. </p> <p> <b>Note</b>: This is not applicable for the <codeph>SP</codeph> system upgrade package. </p> </li> <li id="GUID-012815FA-DE72-53A4-8A4F-56C5CD9BC814"><p>Add, overwrite and eclipse files in any private folder on the Symbian device. </p> </li> </ul> <p> <b> Notes:</b>  </p> <ul><li id="GUID-FF9329AB-E1C1-5ADA-9360-F9821D0FB752"><p>Symbian device users can create a backup and restore eclipsing applications when the Symbian device is restored to factory state. Some applications that depend on the eclipsing packages do not work correctly if the eclipsing packages are not restored. </p> </li> <li id="GUID-4A67E3C2-18EC-5F9B-9552-F13CAC57E641"><p>Any upgrades to System Upgrade package removes the previous package. Private directories are preserved. </p> </li> <li id="GUID-8C67C87A-ECC9-55D8-960A-56237E7D0660"><p>When device creators uninstall a System Upgrade package, the private directories owned by the system upgrade are not deleted. This allows Symbian device users to return to the original software in the <b>Z</b> drive when needed. </p> </li> </ul> <section><title>Upgrade types with RU flag</title> <p>The following table shows whether each of the different upgrade types can be used with the ROMUpgrade (<codeph>RU</codeph>) flag: </p> <table id="GUID-A47C771D-0DFC-521C-A992-B3A9F10DEEF0"><tgroup cols="3"><colspec colname="col0"/><colspec colname="col1"/><colspec colname="col2"/><tbody><row><entry><p> <b>Upgrade type</b>  </p> </entry> <entry><p> <b>Supported</b>  </p> </entry> <entry><p> <b>Conditions</b>  </p> </entry> </row> <row><entry><p>SA </p> </entry> <entry><p>Yes </p> </entry> <entry><p>See <xref href="GUID-CD5907AE-B439-5F76-AE19-9C9491832CB4.dita#GUID-CD5907AE-B439-5F76-AE19-9C9491832CB4/GUID-CF212C3D-CAB2-5DF7-A1F8-8CF25EC4CF74">Full Upgrades using System Upgrade packages (SA, RU)</xref> for details. </p> </entry> </row> <row><entry><p>PU </p> </entry> <entry><p>Yes </p> </entry> <entry><p>The <codeph>PU, RU</codeph> type of upgrade works only for System Upgrade packages. </p> </entry> </row> <row><entry><p>SP </p> </entry> <entry><p>Yes </p> </entry> <entry><p>The <codeph>SP, RU</codeph> type of upgrade works both for System Upgrade and non-System Upgrade packages. </p> <p>For non-System Upgrade packages, the <codeph>SP, RU</codeph> type of upgrade only adds files. </p> </entry> </row> <row><entry><p>PP </p> </entry> <entry><p>No </p> </entry> <entry><p>Not applicable. </p> </entry> </row> <row><entry><p>PA </p> </entry> <entry><p>No </p> </entry> <entry><p>Not applicable. </p> </entry> </row> </tbody> </tgroup> </table> <p>For information about different upgrade types, see <xref href="GUID-7FD72D9F-D65E-5248-A296-F2196F1DF5CF.dita">Upgrade Types</xref>. </p> <p id="GUID-CF212C3D-CAB2-5DF7-A1F8-8CF25EC4CF74">   <b>Full Upgrades using System Upgrade packages (SA, RU)</b>  </p> <p>To install Full Upgrades (<codeph>SA</codeph>) using the System Upgrade package, specify the ROMUpgrade (<codeph>RU</codeph>) flag in the header section of the PKG file. For details, see <xref href="GUID-D9D20EE0-AC86-512A-91C0-EA0ACF3912A7.dita">Package-Header</xref>. </p> <p> <b> Notes:</b>  </p> <ul><li id="GUID-82E8628C-68C0-5C55-95D5-E73E926DABE6"><p>The <codeph>RU</codeph> flag applies only to the <codeph>SA</codeph> package it is in. It does not apply to any of the embedded packages inside the <codeph>SA</codeph>. </p> </li> <li id="GUID-6B862992-D36D-5DF0-8F5D-67DF1A8F8A35"><p>After installing <codeph>SA, RU</codeph> type of upgrade, the <codeph>SA</codeph> files eclipse the files in ROM. Any further upgrades remove the previously installed SA package. </p> </li> <li id="GUID-6E7ADABA-5C68-5377-8D94-C06A16928495"><p>Installing <codeph>SA, RU</codeph> upgrade does not remove or replace the private directory of the application. </p> </li> <li id="GUID-42226A47-054C-5540-BE72-8D0C826B3617"><p>The <codeph>SA, RU</codeph> upgrade can overwrite files previously created by the ROM application in its private directory at runtime. Make sure that the new versions of these files are compatible with the ROM application. This is because if the upgrade is uninstalled, the files created by the upgrade remain on the Symbian device. </p> </li> <li id="GUID-C993C48B-EAD0-5E8B-BDEC-788CFE620BC2"><p>The <codeph>SA, RU</codeph> upgrade removes any previously installed partial upgrades (<codeph>PU</codeph>). The <codeph>PU</codeph> files must be reinstalled. </p> </li> <li id="GUID-EE7085FA-A142-5066-848D-3E7A738AD6EA"><p>This <codeph>SA, RU</codeph> upgrade does not remove previously installed patch upgrades (<codeph>SP</codeph>). </p> </li> </ul> </section> <section><title>Upgrade types with NR flag</title> <p>The SIS files that are installed using the software installer cannot be configured to be non-removable. The SIS files that are preinstalled using <codeph>InterpretSIS</codeph> can be configured to be non-removable. The following table provides conditions under which each of the System Upgrade packages can install SIS files with the <codeph>NR</codeph> flag set. </p> <table id="GUID-391D4D61-85C6-5321-9011-13BF44E5805C"><tgroup cols="3"><colspec colname="col0"/><colspec colname="col1"/><colspec colname="col2"/><tbody><row><entry><p> <b>SU upgrade type</b>  </p> </entry> <entry><p> <b>Supported</b>  </p> </entry> <entry><p> <b>Conditions</b>  </p> </entry> </row> <row><entry><p>SA </p> </entry> <entry><p>Yes </p> </entry> <entry><p>The Software Installer supports installation of non-removable <codeph>SA </codeph> System Upgrade packages over ROM. </p> </entry> </row> <row><entry><p>SU </p> </entry> <entry><p>Yes </p> </entry> <entry><p>The Software Installer supports installation of <codeph>PU</codeph> upgrades to non-removable <codeph>SA</codeph> packages only when the upgrade package has the NR flag. This enables device creators to deliver partial upgrades to non-removable eclipsing packages. </p> </entry> </row> <row><entry><p>SP </p> </entry> <entry><p>Yes </p> </entry> <entry><p>The Software Installer supports installation of non-removable SP packages when the base package is also non-removable and when SP is signed by a trusted certificate for eclipsing. This enables device creators to deliver non-removable augmentations to eclipsing packages. </p> <p>However, the software installer does not support the installation of non-removable <codeph>SP</codeph> System Upgrade packages over removable base packages. </p> </entry> </row> </tbody> </tgroup> </table> <p>The Software Installer allows the <codeph>NR</codeph> flag of an installed package to be modified using an <codeph>SA</codeph> or <codeph>PU</codeph> system upgrade package. </p> </section> </conbody></concept>