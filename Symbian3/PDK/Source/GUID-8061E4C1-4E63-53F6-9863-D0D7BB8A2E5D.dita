<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2007-2010 Nokia Corporation and/or its subsidiary(-ies) All rights reserved. -->
<!-- This component and the accompanying materials are made available under the terms of the License 
"Eclipse Public License v1.0" which accompanies this distribution, 
and is available at the URL "http://www.eclipse.org/legal/epl-v10.html". -->
<!-- Initial Contributors:
    Nokia Corporation - initial contribution.
Contributors: 
-->
<!DOCTYPE concept
  PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept xml:lang="en" id="GUID-8061E4C1-4E63-53F6-9863-D0D7BB8A2E5D"><title>Switching between ABI modes</title><prolog><metadata><keywords/></metadata></prolog><conbody><p>Symbian platform natively runs on ARM processors and to build a Symbian platform application, we need a compiler based on the Application Binary Interface (ABI) for ARM Architecture. There are two versions of the ARM ABI, referred to as v1 and v2 respectively. The Symbian platform build toolchain defines a set of native build targets (<codeph>ARMV5</codeph> and <codeph>ARMV6</codeph>) that invoke ARM's RealView Compiler Tools (RVCT) to build binaries conforming to these two ABI versions. For more information on differences between ABI v1 and v2 toolchains, refer to <xref href="GUID-F21A1ABE-4844-54E2-83E0-4AD25E867A72.dita">ABIv1 to ABIv2 toolchain changes</xref>. </p> <p>From Symbian OS v9.4 onwards, the behaviour of these build targets (<codeph>ARMV5</codeph>, <codeph>ARMV5_ABIv2</codeph>, <codeph>ARMV6</codeph> and <codeph>ARMV6_ABIv2</codeph>) can be changed. The following lists the behaviour of these build targets prior to, for and after Symbian OS v9.4: </p> <ul><li id="GUID-847B3C77-A11D-5DAF-8D8D-BC1D0C5C6FBA"><p>For Symbian OS v9.3 and earlier versions, the build targets used to create binaries conforming to ABI v1 and ABI v2 are <codeph>ARMV5</codeph> and <codeph>ARMV5_ABIv2</codeph> respectively, and <codeph>ARMV6</codeph> and <codeph>ARMV6_ABIv2</codeph> respectively. By default, the <codeph>abld build</codeph> command will create binaries conforming to ARMV5 ABI v1. </p> </li> <li id="GUID-EDC5E30D-310C-5C5A-BBEC-CA843AD32969"><p>For Symbian OS v9.4 and later, the build targets used to create binaries conforming to ABI v2 and ABI v1 are <codeph>ARMV5</codeph> and <codeph>ARMV5_ABIv1</codeph> respectively, and <codeph>ARMV6</codeph> and <codeph>ARMV6_ABIv1</codeph> respectively. By default, the <codeph>abld build</codeph> command will create binaries conforming to ARMV5 ABI v2. </p> </li> </ul> <p>You can choose to switch between the above listed behaviours using the macro <codeph>ENABLE_ABIV2_MODE</codeph>. If you enable this macro, the behaviour of build targets <codeph>ARMV5</codeph> and <codeph>ARMV6</codeph> is changed to create binaries conforming to ABI v2 instead of ABI v1. If you want to create binaries conforming to ABI v1, use the build targets <codeph>ARMV5_ABIv1</codeph> and <codeph>ARMV6_ABIv1</codeph>. </p> <section><title> How to switch to ABI v2 mode</title> <p>To switch to ABI v2 mode from ABI v1 mode, edit the <filepath>variant.cfg</filepath> file located at <filepath>epoc32\tools\variant\</filepath> and add the macro <codeph>ENABLE_ABIV2_MODE</codeph>. </p> <p>After you add the macro to <filepath>variant.cfg</filepath> file, the following <codeph>abld</codeph> commands will create binaries conforming to ABI v2 under <filepath>epoc32\release\ARMV5\</filepath> or <filepath>epoc32\release\ARMV6\</filepath> folders: </p> <p><userinput>abld build</userinput> </p> <p><userinput>abld build ARMV5</userinput> </p> <p><userinput>abld build ARMV6</userinput> </p> <p>If you want to create binaries conforming to ABI v1 under <filepath>epoc32\release\ARMV5_ABIV1\</filepath> or <filepath>epoc32\release\ARMV6_ABIV1\</filepath> folders, use the following <codeph>abld</codeph> commands: </p> <p><userinput>abld build ARMV5_ABIV1</userinput> </p> <p><userinput>abld build ARMV6_ABIV1</userinput> </p> <p>A summary of the available build targets, their instruction set, compiler version, ABI version and their target location, after you switch to ABI v2 mode is as follows: </p> <table id="GUID-EBA0FCB5-7E80-5FF2-9A98-A5AC2ED09CB7"><tgroup cols="5"><colspec colname="col0"/><colspec colname="col1"/><colspec colname="col2"/><colspec colname="col3"/><colspec colname="col4"/><tbody><row><entry><p> <b>Target name</b>  </p> </entry> <entry><p> <b>Instruction set</b>  </p> </entry> <entry><p> <b>Compiler</b>  </p> </entry> <entry><p> <b>ABI</b>  </p> </entry> <entry><p> <b>Target location</b>  </p> </entry> </row> <row><entry><p> <codeph>ARMV5</codeph>  </p> </entry> <entry><p>v5 </p> </entry> <entry><p>RVCT 2.2 Build 616 </p> </entry> <entry><p>v2 </p> </entry> <entry><p> <filepath>epoc32\release\ARMV5\</filepath>  </p> </entry> </row> <row><entry><p> <codeph>ARMV5_ABIv1</codeph>  </p> </entry> <entry><p>v5 </p> </entry> <entry><p>RVCT 2.2 Build 616 </p> </entry> <entry><p>v1 </p> </entry> <entry><p> <filepath>epoc32\release\ARMV5_ABIV1\</filepath>  </p> </entry> </row> <row><entry><p> <codeph>ARMV6</codeph>  </p> </entry> <entry><p>v6 </p> </entry> <entry><p>RVCT 2.2 Build 616 </p> </entry> <entry><p>v2 </p> </entry> <entry><p> <filepath>epoc32\release\ARMV6\</filepath>  </p> </entry> </row> <row><entry><p> <codeph>ARMV6_ABIv1</codeph>  </p> </entry> <entry><p>v6 </p> </entry> <entry><p>RVCT 2.2 Build 616 </p> </entry> <entry><p>v1 </p> </entry> <entry><p> <filepath>epoc32\release\ARMV6_ABIV1\</filepath>  </p> </entry> </row> <row><entry><p> <codeph>GCCE</codeph>  </p> </entry> <entry><p>v5 </p> </entry> <entry><p>GCCE </p> </entry> <entry><p>v2 </p> </entry> <entry><p> <filepath>epoc32\release\gcce\</filepath>  </p> </entry> </row> </tbody> </tgroup> </table> </section> <section><title>How to switch to ABI v1 mode</title> <p>To switch back to ABI v1 mode from ABI v2 mode, disable the <codeph>ENABLE_ABIV2_MODE</codeph> macro. You can disable the macro either by commenting it or removing it from the <filepath>variant.cfg</filepath> file. </p> <p>After you disable the <codeph>ENABLE_ABIV2_MODE</codeph> macro, the following <codeph>abld</codeph> commands will create binaries conforming to ABI v1 under <filepath>epoc32\release\ARMV5\</filepath> or <filepath>epoc32\release\ARMV6\</filepath> folders: </p> <p><userinput>abld build</userinput> </p> <p><userinput>abld build ARMV5</userinput> </p> <p><userinput>abld build ARMV6</userinput> </p> <p>If you want to build binaries conforming to ABI v2 under <filepath>epoc32\release\ARMV5_ABIV2\</filepath> or <filepath>epoc32\release\ARMV6_ABIV2\</filepath> folders, use the following <codeph>abld</codeph> commands: </p> <p><userinput>abld build ARMV5_ABIV2</userinput> </p> <p><userinput>abld build ARMV6_ABIV2</userinput> </p> </section> </conbody></concept>