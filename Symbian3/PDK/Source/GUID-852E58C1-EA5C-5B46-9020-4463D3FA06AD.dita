<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2007-2010 Nokia Corporation and/or its subsidiary(-ies) All rights reserved. -->
<!-- This component and the accompanying materials are made available under the terms of the License 
"Eclipse Public License v1.0" which accompanies this distribution, 
and is available at the URL "http://www.eclipse.org/legal/epl-v10.html". -->
<!-- Initial Contributors:
    Nokia Corporation - initial contribution.
Contributors: 
-->
<!DOCTYPE concept
  PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept xml:lang="en" id="GUID-852E58C1-EA5C-5B46-9020-4463D3FA06AD"><title>The LBS Administration Repository Initialisation File</title><shortdesc>This topic describes the LBS administration repository initialisation file. </shortdesc><prolog><metadata><keywords/></metadata></prolog><conbody><section><title>Required background</title> <p><xref href="GUID-9348D79B-D4BF-50B0-B787-DDA2765CE058.dita">LBS administration service overview</xref> describes the LBS administration service and the LBS Administration API. </p> </section> <section><title>Introduction</title> <p>The repository initialisation file is used to create default LBS administration settings in the central repository. </p> <p>The contents of the initialisation file can be changed as part of the Symbian platform build and configuration process. Changing the contents of the file changes the LBS administration settings that are applied when LBS starts for the first time. </p> <p>The settings defined in the initialisation file are applied to the LBS subsystem by calling <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-42D1B1DF-A5BD-3143-BBC3-EDFC1151356D"><apiname>CLbsAdmin::ResetToDefault()</apiname></xref>. </p> </section> <section><title>The repository initialisation file</title> <p>The file <filepath>&lt;LBS_ROOT&gt;\LbsAdmin\data\1028224B.txt</filepath> (shown below) is the source text initialisation file of the LBS administration service. <filepath>&lt;LBS_ROOT&gt;</filepath> is the root directory of the Symbian LBS subsystem distribution. </p> <codeblock id="GUID-152D6FED-FCB7-53DD-97F3-03539E5DCE20" xml:space="preserve">

# 1.0 File Version For LBS Administration API

# This file is compiled into the binary '.cre' version
# by an extension makefile (createbinaryrep.mk), which
# is called as part of the standard abld build process.
#
# The ".cre" version is the one used to install the 
# repository when the ROM is built. 

cenrep
version 1

[Platsec]
cap_rd=AlwaysPass
cap_wr=WriteDeviceData

[Main]
#KSettingHomeSelfLocate. ESelfLocateOn
0x00000001  int  1
#KSettingRoamingSelfLocate. ESelfLocateOff
0x00000002  int  2
#KSettingQualityProfileSelfLocate. Profile 0
0x00000003  int  0
#KSettingHomeExternalLocate. EExternalLocateOn
0x00000004  int  1
#KSettingRoamingExternalLocate. EExternalLocateOn
0x00000005  int     1
#KSettingQualityProfileExternalLocate. Profile 0
0x00000006  int  0
#KSettingHomeEmergencyLocate. EExternalLocateOn
0x00000007  int  1
#KSettingRoamingEmergencyLocate. EExternalLocateOn
0x00000008  int  1
#KSettingHomeTransmitLocate. ETransmitLocateOn
0x00000009  int  1
#KSettingRoamingTransmitLocate. ETransmitLocateOn
0x0000000A  int  1
#KSettingQualityProfileTransmitLocate. Profile 0
0x0000000B  int  0
#KSettingHomeGpsMode. EGpsPreferTerminalBased
0x0000000C  int     1
#KSettingRoamingGpsMode. EGpsAutonomous
0x0000000D  int     3
#KSettingHomeProtocolModule. Protocol Id 0
#The following is a test plug-in and must be changed to device creator implementation or SUPL reference module UID
0x0000000E  int  0x10281D70
#KSettingRoamingProtocolModule. Protocol Id 0
0x0000000F  int  0
#KSettingLbsSystemStartMode. ELbsSystemPersistent
0x00000010  int  2
#KSettingPrivacyTimeoutAction. EPrivacyTimeoutNetworkDefined
0x00000011  int  1
#KSettingPrivacyHandler. EPrivacyHandleByNotifier
0x00000012  int  1
#KSettingLbsBehaviourMode. ELbsBehaviourCustom1
0x00000013  int  2
#KLbsSettingLogger. ELoggerOn
0x00000014  int  1
#KLbsSpecialFeatureMaximumRequestDelay. Timeout of 0 denotes feature off.
0x00000015  int  0
#KLbsSpecialFeatureAllowTBFinalNetPos. Feature off.
0x00000016  int  2
#KLbsSpecialFeatureWithholdDeliveryOfReferencePositions. Feature off.
0x00000017  int  2
#KLbsProtocolModuleLoading
0x00000018  int  1
#KLbsSettingMaximumExternalLocateRequests. Value: 1
0x00000019  int  1
#KLbsSettingPrivacyShutdownDelay. Value: 2000000 (2 seconds)
0x0000001A  int  2000000
#KLbsSettingPrivacyMaxNetworkSessions. Value: 4
0x0000001B  int  4
#KLbsSettingPrivacyConnectionTimeout. Value: 30000000 (30 seconds)
0x0000001C  int  30000000
#KLbsSpecialFeatureIgnoreAccuracy. Feature off.
0x0000001E  int  2
#KLbsSettingPrivacyAppTimeout in milliseconds value: 20s
0x0000001F  int  20000
#KLbsSpecialFeatureIntermediateFutileUpdate. Feature off.
0x00000020  int  2
#KLbsSettingHomeNetworkInducedLocate. EExternalLocateOff
0x00000021  int  3
#KLbsSettingRoamingNetworkInducedLocate. EExternalLocateOff
0x00000022  int  3
#KLbsSettingSetClockModule. Id 0. Use the default, internal implementation.
0x0000003C  int  0x00000000
#LbsSettingClockAdjustInterval in miliseconds. Value: 7days
0x0000003D  int  604800000
#KLbsSettingClockAdjustThreshold in miliseconds. Value: 1s
0x0000003E  int  1000
#KSettingClockAdjust. EClockAdjustOn
0x00000040  int  1

</codeblock> <p>The format of entries is <codeph>&lt;ID&gt; &lt;type&gt;
          &lt;value&gt;</codeph> where <codeph>&lt;ID&gt;</codeph> must be one of the hexadecimal values shown, <codeph>&lt;type&gt;</codeph> must be <codeph>int</codeph> and <codeph>&lt;value&gt;</codeph> must be one of the values defined by the enumerated types shown in the following list. </p> <p> <i>Note that it is necessary to use a numerical value for &lt;value&gt; rather than the enumerated type value.</i>  </p> <ul><li id="GUID-19363C13-F4C3-58EC-BE90-5FE95A95BB9D"><p> <codeph>KLbsSettingHomeSelfLocate</codeph>  </p> <p>Purpose: Configures self location requests (MO-LR) in the home network. This setting turns self location requests on or off. </p> <p>Values: Defined by <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-F3E58804-AAEE-32A6-A3C8-9868C9C8283C"><apiname>CLbsAdmin::TSelfLocateService</apiname></xref>. See table below. </p> <table id="GUID-94B836DD-13CF-5D29-BE71-F2DB3D9E3D5F"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>TSelfLocateService</entry> <entry>Numerical value</entry> </row> </thead> <tbody><row><entry><p>ESelfLocateOn </p> </entry> <entry><p>1</p> </entry> </row> <row><entry><p>ESelfLocateOff </p> </entry> <entry><p>2</p> </entry> </row> </tbody> </tgroup> </table> <p> </p> </li> <li id="GUID-FCC528A9-9BAE-5668-AF9B-25331B136AC7"><p> <codeph>KLbsSettingRoamingSelfLocate</codeph>  </p> <p>Purpose: Configures self location requests (MO-LR) when roaming. This setting turns self location requests on or off. </p> <p>Values: Defined by <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-F3E58804-AAEE-32A6-A3C8-9868C9C8283C"><apiname>CLbsAdmin::TSelfLocateService</apiname></xref>. See table above. </p> </li> <li id="GUID-5C77655A-4BB2-595A-B930-05305BA275DE"><p> <codeph> KLbsSettingHomeExternalLocate</codeph>  </p> <p>Purpose: Configures external location requests (MT-LR) in the home network. This setting turns external location requests on or off. It also defines if user permission for external requests should always be obtained when external locate is on, and if the user should always be notified of rejected external location requests when external locate is off. </p> <p>Values: Defined by <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-74AF5A08-F6D9-36F7-A904-710C18248569"><apiname>CLbsAdmin::TExternalLocateService</apiname></xref>. See table below. </p> <table id="GUID-3C6EE69B-0D1A-503B-8535-8BED0C1BB3B0"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>TExternalLocateService</entry> <entry>Numerical value</entry> </row> </thead> <tbody><row><entry><p>EExternalLocateOn </p> </entry> <entry><p>1</p> </entry> </row> <row><entry><p>EExternalLocateOnButAlwaysVerify </p> </entry> <entry><p>2</p> </entry> </row> <row><entry><p>EExternalLocateOff </p> </entry> <entry><p>3</p> </entry> </row> <row><entry><p>EExternalLocateOffButNotify </p> </entry> <entry><p>4</p> </entry> </row> </tbody> </tgroup> </table> <p>The value <codeph>EExternalLocateOnButAlwaysVerify</codeph> must not be used with the Network Privacy API as a privacy verification response cannot be returned for a <i>privacy notification</i> that was sent using this API. </p> </li> <li id="GUID-31B7C03F-FCD9-5E01-8292-9AEEDBF26682"><p> <codeph> KLbsSettingRoamingExternalLocate</codeph>  </p> <p>Purpose: Configures external location requests (MT-LR) when roaming. See <codeph>KLbsSettingHomeExternalLocate</codeph> above. </p> <p>Values: Defined by <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-74AF5A08-F6D9-36F7-A904-710C18248569"><apiname>CLbsAdmin::TExternalLocateService</apiname></xref>. See table above. </p> </li> <li id="GUID-33700EBC-A0D6-58A3-8028-9E0C5EA7D86E"><p> <codeph> KLbsSettingHomeTransmitLocate</codeph>  </p> <p>Purpose: Configures transmit to third party location requests (X3P) in the home network. This setting turns transmit to third party requests on or off. </p> <p>Values: Defined by <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-9FF8B24A-5254-34A3-8626-9BFCF5440158"><apiname>CLbsAdmin::TTransmitLocateService</apiname></xref>. See table below. </p> <table id="GUID-A1A11930-2B19-5D64-92EC-577D42660C6B"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>TTransmitLocateService</entry> <entry>Numerical value</entry> </row> </thead> <tbody><row><entry><p>ETransmitLocateOn </p> </entry> <entry><p>1</p> </entry> </row> <row><entry><p>ETransmitLocateOff </p> </entry> <entry><p>2</p> </entry> </row> </tbody> </tgroup> </table> </li> <li id="GUID-D6619631-18C8-5ED3-BD4E-722D8062CE34"><p> <codeph>KLbsSettingRoamingTransmitLocate</codeph>  </p> <p>Purpose: Configures transmit to third party location requests (X3P) when roaming. This setting turns transmit to third party requests on or off. </p> <p>Values: Defined by CLbsAdmin::<xref href="GUID-DEBB8A6F-1FCD-3001-A3B9-7C4F314B34A9.dita"><apiname>TTransmitLocateService</apiname></xref>. See table above. </p> </li> <li id="GUID-82AE51E3-7134-5441-8892-42CEB21691F7"><p> <codeph>KLbsSettingQualityProfileSelfLocate</codeph>  </p> <p>Purpose: Defines the quality profile used for MO-LR. This setting specifies a quality profile <codeph>ProfileID</codeph> for self location requests as defined in the quality profile file <filepath>lbsprofile.ini</filepath>. </p> <p> <i>Changes to this setting do not change the quality criteria used for RPositioner subsessions that are already open. Only subsessions opened after this value is changed use the different quality profile.</i>  </p> <p>Values: The value of a ProfileID in file <filepath>lbsprofile.ini</filepath>  </p> </li> <li id="GUID-C7D408E4-F80A-5270-90A5-B16CCA18A5D8"><p> <codeph>KLbsSettingQualityProfileExternalLocate</codeph>  </p> <p>Purpose: Defines the quality profile used for MT-LR. This setting specifies a quality profile <codeph>ProfileID</codeph> for external location requests as defined in the quality profile file <filepath>lbsprofile.ini</filepath>. </p> <p>Values: The value of a ProfileID in file <filepath>lbsprofile.ini</filepath> but a value of <xref href="GUID-669E6305-674F-3750-B5B3-89255C0DA488.dita"><apiname>KLbsNoProfileInUseQualityProfileId</apiname></xref> means that a profile is not used when <codeph>KSettingLbsBehaviourMode</codeph> is set to <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-08A89E2A-6247-360C-9226-CBBCE13D4BE8"><apiname>CLbsAdmin::ELbsBehaviourModeOriginal</apiname></xref>. LBS uses quality criteria received as part of the external locate request. </p> </li> <li id="GUID-7D73522D-318C-5EA3-B2AF-3B48CF3597BC"><p> <codeph>KLbsSettingHomeTransmitLocate</codeph>  </p> <p>Purpose: Defines the quality profile used for X3P. This setting specifies a quality profile <codeph>ProfileID</codeph> for transmit to third party requests as defined in the quality profile file <filepath>lbsprofile.ini</filepath>. </p> <p> <i>The quality profile values in lbsprofile.ini are only used if the quality criteria supplied by the network is incomplete or invalid.</i>  </p> <p>Values: The value of a ProfileID in file <filepath>lbsprofile.ini</filepath>  </p> </li> <li id="GUID-8497EED3-2BA4-51F2-AA6D-204F6CE8D85E"><p> <codeph>KLbsSettingHomeGpsMode</codeph>  </p> <p>Purpose: Configures the GPS mode in the home network. This setting specifies how LBS uses GPS to obtain a position fix. </p> <p>Values: Defined by <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-9F902F01-29A3-3929-B045-83C72DB96E39"><apiname>CLbsAdmin::TGpsMode</apiname></xref>. See table below. </p> <table id="GUID-B18466B7-4018-54C5-8D42-CBDC545D69C2"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>TGpsMode</entry> <entry>Numerical value</entry> </row> </thead> <tbody><row><entry><p>EGpsPreferTerminalBased </p> </entry> <entry><p>1</p> </entry> </row> <row><entry><p>EGpsAlwaysTerminalBased </p> </entry> <entry><p>2</p> </entry> </row> <row><entry><p>EGpsAutonomous </p> </entry> <entry><p>3</p> </entry> </row> <row><entry><p>EGpsPreferTerminalAssisted </p> </entry> <entry><p>4</p> </entry> </row> <row><entry><p>EGpsAlwaysTerminalAssisted </p> </entry> <entry><p>5 </p> </entry> </row> </tbody> </tgroup> </table> <p> </p> </li> <li id="GUID-F12FDA86-379D-5478-8003-65BCEF826597"><p> <codeph> KLbsSettingRoamingGpsMode</codeph>  </p> <p>Purpose: Configures the GPS mode when roaming. See <codeph>KLbsSettingHomeGpsMode</codeph> above. </p> <p>Values: Defined by <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-9F902F01-29A3-3929-B045-83C72DB96E39"><apiname>CLbsAdmin::TGpsMode</apiname></xref>. See table above. </p> </li> <li id="GUID-AFDBA9C7-0690-5301-9961-CC783EA5E71C"><p> <codeph>KLbsSettingHomeProtocolModule</codeph>  </p> <p>Purpose: Defines the UID of the network protocol module to be used in the home network. </p> <p>Values: The UID of the ECom network protocol module plug-in as specified by the implementation_uid value in the ECom resource file. </p> </li> <li id="GUID-1CBA1C63-C9E5-51AA-B654-FCFAB0021FF5"><p> <codeph>KLbsSettingRoamingProtocolModule</codeph>  </p> <p>Purpose: Defines the UID of the network protocol module to be used when roaming. </p> <p>Values: The UID of the ECom network protocol module plug-in as specified by the implementation_uid value in the ECom resource file. </p> </li> <li id="GUID-F98FFF53-341A-5361-B480-3142E7F1EC8E"><p> <codeph>KLbsProtocolModuleLoading</codeph>  </p> <p>Purpose: Defines the network protocol module loading strategy - whether both protocol modules are loaded on subsystem startup or based on network registration status. </p> <p>Values: Defined by <xref href="GUID-6494AD2E-1A53-3369-9B85-9F2CD2E51E47.dita#GUID-6494AD2E-1A53-3369-9B85-9F2CD2E51E47/GUID-1AD05E2F-6AA0-38AE-8640-02D4B4EA3363"><apiname>TLbsAdminProtocolModuleLoadingInfo::_TProtocolModuleLoading</apiname></xref>. See table below for the numerical values and <xref href="GUID-9348D79B-D4BF-50B0-B787-DDA2765CE058.dita">LBS administration service</xref> for a full explanation of the meanings. </p> <table id="GUID-5B09F1AD-3919-53BA-AECD-C9232753E807"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>_TProtocolModuleLoading</entry> <entry>Numerical value</entry> </row> </thead> <tbody><row><entry><p>EProtocolModuleLoadingByStatus </p> </entry> <entry><p>1</p> </entry> </row> <row><entry><p>EProtocolModuleLoadingAll </p> </entry> <entry><p>2</p> </entry> </row> </tbody> </tgroup> </table> </li> <li id="GUID-9EB62916-88A2-5F14-8D02-962524999694"><p> <codeph>KLbsSettingPrivacyHandler</codeph>  </p> <p>Purpose: Specifies use of a Privacy Controller or Privacy Notifiers. Either a Privacy Controller, Privacy Notifiers or the Privacy Q&amp;N Notifiers are used to inform the user when a privacy/location request is received from the network. </p> <p>Values: Defined by <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-E10A0475-7286-3AC1-9131-DEC07BA5B75B"><apiname>CLbsAdmin::TPrivacyHandler</apiname></xref>. See table below. </p> <table id="GUID-C6B12707-8E28-555D-B1FF-D56088B79F23"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>TPrivacyHandler</entry> <entry>Numerical value</entry> </row> </thead> <tbody><row><entry><p>EPrivacyHandleByNotifier </p> </entry> <entry><p>1</p> </entry> </row> <row><entry><p>EPrivacyHandleByController </p> </entry> <entry><p>2</p> </entry> </row> <row><entry><p>EPrivacyHandleByAdvancedNotifier </p> </entry> <entry><p>3</p> </entry> </row> </tbody> </tgroup> </table> </li> <li id="GUID-F16B8714-3DD6-5098-BF39-5E267A6F84DC"><p> <codeph>KLbsSettingPrivacyAppTimeout</codeph>  </p> <p>Purpose: Specifies the time in microseconds that LBS waits for a response from a Privacy Controller or Privacy Notifier. A value of zero means the LBS nevers times out the request. The setting must be set in the repository initialisation file and cannot be set at runtime. </p> <p>Values: A time in microseconds. </p> </li> <li id="GUID-97FAFCC8-B6F4-5337-818D-0A2ED24DD410"><p> <codeph>KLbsSettingPrivacyTimeoutAction</codeph>  </p> <p>Purpose: Specifies the action to take on timeout of a MT-LR privacy request. This setting specifies if LBS should send a rejection message or take the action specified as part of the MT-LR privacy request message. </p> <p>Values: Defined by <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-F063FE21-9996-3F0E-9BE2-95067EF5B5E6"><apiname>CLbsAdmin::TPrivacyTimeoutAction</apiname></xref>. See table below. </p> <table id="GUID-00D1AC50-5BAD-5B65-B923-B2F56D47BAEF"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>TPrivacyTimeoutAction</entry> <entry>Numerical value</entry> </row> </thead> <tbody><row><entry><p>EPrivacyTimeoutNetworkDefined </p> </entry> <entry><p>1</p> </entry> </row> <row><entry><p>EPrivacyTimeoutReject </p> </entry> <entry><p>2</p> </entry> </row> <row><entry><p>EPrivacyTimeoutIgnore </p> </entry> <entry><p>3</p> </entry> </row> </tbody> </tgroup> </table> <p> </p> </li> <li id="GUID-045F1CFE-0B6F-5A6A-BE78-55C85CCB623E"><p> <codeph>KLbsSettingClockAdjust</codeph>  </p> <p>Purpose: Configuration of automatic system clock synchronisation with GPS. This setting specifies if automatic clock synchronisation is on or off. </p> <p>Values: Defined by <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-43E5D177-778D-304C-BE11-18FBABE66E28"><apiname>CLbsAdmin::TClockAdjust</apiname></xref>. See table below. </p> <table id="GUID-D1705008-E00B-5970-B83D-DE63571E687C"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>TClockAdjust</entry> <entry>Numerical value</entry> </row> </thead> <tbody><row><entry><p>EClockAdjustOn </p> </entry> <entry><p>1</p> </entry> </row> <row><entry><p>EClockAdjustOff </p> </entry> <entry><p>2</p> </entry> </row> </tbody> </tgroup> </table> <p> </p> </li> <li id="GUID-E3750EA8-4ECC-5E2A-97D2-800D9F920F23"><p> <codeph>KLbsSettingSetClockModule</codeph>  </p> <p>Purpose: Configuration of the set clock module. This setting specifies the implementation UID of a device creator clock plug-in DLL. This value is 0 to use the default Symbian set clock implementation. </p> <p>Values: 0 to use the default LBS set clock module, or the UID of a plug-in as specified by the implementation_uid value in the ECom resource file. </p> </li> <li id="GUID-A3EDE3DA-5E8C-529B-B4B2-5D2D677C17A1"><p> <codeph>KLbsSettingClockAdjustInterval</codeph>  </p> <p>Purpose: Specifies the system clock adjustment interval in milliseconds. This setting specifies how often the system clock should be synchronised with the GPS clock. The setting is used only if the <codeph>KLbsSettingAllowClockAdjust</codeph> is set to allow automatic system clock adjustment. </p> <p>Values: A time in milliseconds </p> </li> <li id="GUID-EF3ED797-A4F1-5830-86DF-B34CADC1D289"><p> <codeph>KLbsSettingClockAdjustThreshold</codeph>  </p> <p>Purpose: Configures the system clock adjustment interval in milliseconds. This setting specifies how great the difference in time between the system clock and the GPS clock must be before the system clock is adjusted. </p> <p>Values: A time in milliseconds </p> </li> <li id="GUID-BCBFDD68-3B50-5A0B-8A44-A2D6CF1F9D91"><p> <codeph>KLbsSettingLogger</codeph>  </p> <p>Purpose: Specifies if logging is on or off. LBS subsystem components use this setting to decide whether to write log entries. </p> <p>Values: Defined by <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-3CB88D9A-DF0A-387F-8BFD-C31B565BAAA6"><apiname>CLbsAdmin::TLogger</apiname></xref>. See table below. </p> <table id="GUID-77796295-44D1-50EA-8466-D7EFF22217BF"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>TLogger</entry> <entry>Numerical value</entry> </row> </thead> <tbody><row><entry><p>ELoggerOn </p> </entry> <entry><p>1</p> </entry> </row> <row><entry><p>ELoggerOff </p> </entry> <entry><p>2</p> </entry> </row> </tbody> </tgroup> </table> </li> <li id="GUID-22DE2A24-156E-5CCD-ADC2-BFD54B0CDA7E"><p> <codeph>KLbsSettingMaximumExternalLocateRequests</codeph>  </p> <p>Purpose: Specifies the maximum number of simultaneous privacy requests supported by the LBS subsystem. The setting only affects LBS subsystem behaviour when privacy requests are received via either the Privacy Request API or the Network Privacy API. This setting is read only on LBS system startup. Setting it via the LBS Admin API has no effect while LBS running. Setting will take effect during next LBS system startup. </p> <p>Values: The value 0 is reserved for future use. The value 1 is the default, this allows only one active external locate request at a time. Values greater than 1 allow multiple requests to be handled simultaneously. </p> </li> <li id="GUID-CB36F506-267A-5E0E-AA12-72D0460ECC85"><p> <codeph>KLbsSettingPrivacyShutdownDelay</codeph>  </p> <p>Purpose: The time to wait after the last privacy client disconnects before shutting down LBS. Only used with the Network Privacy API and the Privacy Request API. This setting is read only on LBS system startup. Setting it via the LBS Admin API has no effect while LBS running. Setting will take effect during next LBS system startup. </p> <p>Values: An integer value in microseconds. </p> </li> <li id="GUID-5D03563D-0929-58B5-8AD0-ED71BB7D16CD"><p> <codeph>KLbsSettingPrivacyMaxNetworkSessions</codeph>  </p> <p>Purpose: The maximum number of concurrent network privacy sessions allowed with the Network Privacy API. This setting is read only on LBS system startup. Setting it via the LBS Admin API has no effect while LBS running. Setting will take effect during next LBS system startup. </p> <p>Values: An integer value. The value 0 disallows any network privacy sessions. </p> </li> <li id="GUID-36FE54F0-0214-5194-AB6C-E97365FC97F4"><p> <codeph>KLbsSettingPrivacyConnectionTimeout</codeph>  </p> <p>Purpose: The connection timeout for sessions using the Network Privacy API. This setting is read only on LBS system startup. Setting it via the LBS Admin API has no effect while LBS running. Setting will take effect during next LBS system startup. </p> <p>Values: An integer value in microseconds. </p> </li> <li id="GUID-70BEF80A-53BE-595B-BAC0-2BEE04AB90F2"><p> <codeph>KLbsSettingBehaviourMode</codeph>  </p> <p>Purpose: Specifies the behaviour mode for the LBS subsystem. The setting must be set in the repository initialisation file and cannot be set at runtime via the LBS Administration API as it is used by the LBS subsystem on startup. </p> <p>Values: Defined by <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-5C1F785E-4BEA-3D36-9921-A36526BDD841"><apiname>CLbsAdmin::TLbsBehaviourMode</apiname></xref>. See table below. </p> <table id="GUID-4DE2A8B5-181B-5990-9668-CF13E9CCABA9"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>TLbsBehaviourMode</entry> <entry>Numerical value</entry> </row> </thead> <tbody><row><entry><p>ELbsBehaviourModeOriginal </p> </entry> <entry><p>1</p> </entry> </row> <row><entry><p>ELbsBehaviourCustom1 </p> </entry> <entry><p>2</p> </entry> </row> </tbody> </tgroup> </table> <p> <b>The value ELbsBehaviourModeCustom1 is used as the default LBS behaviour if the setting is not included in the file. Note that ELbsBehaviourCustom1 is the default LBS behaviour and the only behaviour possible prior to Symbian OS v9.4.</b>  </p> <p>The behaviour differences are as described in the following table. </p> <table id="GUID-90D9F0DB-B08E-525B-BCEA-015A9F63A1DE"><tgroup cols="3"><colspec colname="col0"/><colspec colname="col1"/><colspec colname="col2"/><thead><row><entry>LBS Behaviour</entry> <entry>ELbsBehaviourCustom1 (default)</entry> <entry>ELbsBehaviourModeOriginal</entry> </row> </thead> <tbody><row><entry><p>Behaviour when <xref href="GUID-F6B5F777-D12F-5913-AECE-047DF8C72F1F.dita">tracking</xref> with Location Acquisition API </p> </entry> <entry><p>When tracking, positions calculated in the network are not returned to the client. </p> </entry> <entry><p>When tracking, positions calculated in the network can be returned to a client. </p> </entry> </row> <row><entry><p>MO-LR transmit to third party timeout (X3P) behaviour </p> </entry> <entry><p>When an X3P request is made in LBS a timer is started. As part of the X3P request a location request is received from the network. The network can send more than one request. If LBS is in <xref href="GUID-CB6B4D1A-ACB9-5571-8C23-4BC095209782.dita">simultaneous TB + TA</xref> mode, the X3P request timer is restarted when the first location request is received from the network. </p> </entry> <entry><p>The X3P request timer is not restarted when the first location request is received from the network. </p> </entry> </row> <row><entry><p>Behaviour when an MT-LR privacy request is received. </p> </entry> <entry><p>LBS always rejects a privacy request if the quality profile ID specified by <codeph>KLbsSettingQualityProfileExternalLocate</codeph> is invalid (it cannot be found in <filepath>lbsprofile.ini</filepath> file). </p> </entry> <entry><p>If the quality profile ID specified by KLbsSettingQualityProfileExternalLocate is <xref href="GUID-669E6305-674F-3750-B5B3-89255C0DA488.dita"><apiname>KLbsNoProfileInUseQualityProfileId</apiname></xref> LBS does not try to find it in <filepath>lbsprofile.ini</filepath>. LBS expects all quality criteria to be supplied with the location request. </p> </entry> </row> </tbody> </tgroup> </table> </li> </ul> <p> <i>Note that the settings KLbsSettingHomeEmergencyLocate, KLbsSettingRoamingEmergencyLocate, KLbsSettingRoamingProtocolModule and KLbsSettingLbsSystemStartMode are not used and changing their value has no effect.</i>  </p> </section> <section id="GUID-FC73F710-36C2-5805-9EE9-6E9C55BE9655"><title>Special feature settings</title> <p>The repository initialisation file also includes 'special feature' settings that have names prefixed <codeph>KLbsSpecialFeature</codeph>. These settings affect low-level, runtime behaviour of LBS for specific circumstances. The settings are intended to allow licensees and partners to configure the detailed runtime behaviour of LBS at subsystem build time. The settings are therefore read-only and can only be changed in the repository initialisation file and not via the LBS Admin API. </p> <p>The special feature settings are: </p> <ul><li id="GUID-D9C7ECB1-6839-5070-AE64-94F409869472"><p> <codeph>KLbsSpecialFeatureMaximumRequestDelay</codeph>  </p> <p>Purpose: This setting specifies the length of time that the following location updates and error codes are temporarily buffered in LBS: </p> <ul><li id="GUID-419E3822-63C2-507F-A7A4-AD66830B3E2A"><p>A single reference location received from the network </p> </li> <li id="GUID-3E3143F1-B612-53F0-88D3-E460FD614F4F"><p>A single final network location received from the network </p> </li> <li id="GUID-9FA831EB-189A-5966-986D-9EF676C607A1"><p>A single error code received from an A-GPS Module </p> </li> </ul> <p>Buffering of location updates and error codes ensures that they are not lost when the LBS subsystem has no outstanding location request. This behaviour can occur in the following circumstances: </p> <ol id="GUID-B7DC90F7-463A-5B70-BCD8-800A21144C22"><li id="GUID-AD188722-DB13-5896-BAB2-60E57A34807F"><p>A client application calls <codeph>RPositioner::NotifyPositionUpdate()</codeph>. </p> </li> <li id="GUID-A26344DD-9713-5906-800E-D449BBCD5822"><p>A location update or error code is generated in LBS. The client application's <codeph>CActive::RunL()</codeph> method is called but the next call to <codeph>RPositioner::NotifyPositionUpdate()</codeph> in that method is not yet reached. </p> </li> <li id="GUID-1334A77A-791E-52B0-A7C4-ACD1D60C1B13"><p>A reference location, final network location or AGPS error code is generated. </p> <ul><li id="GUID-87C77644-55AC-5496-AA82-D4B0A374E9D5"><p>If <codeph>KLbsSpecialFeatureMaximumRequestDelay</codeph> is not set in the repository initialisation file (or is set to 0) then the client cannot be notified of the update because it has not yet called <codeph>RPositioner::NotifyPositionUpdate()</codeph> in its <codeph>RunL()</codeph> method. </p> </li> <li id="GUID-0A9F775C-1741-53DC-9A4C-5F866A3DF254"><p>If <codeph>KLbsSpecialFeatureMaximumRequestDelay</codeph> is set then LBS buffers the location or error code for the specified length of time. If the client calls <codeph>NotifyPositionUpdate()</codeph> within that time then the buffered location or error code can be returned. </p> </li> </ul> </li> </ol> <p>Values: The time is defined in milliseconds and is of type <xref href="GUID-0C59CA40-B814-3453-B690-1AE121215D65.dita"><apiname>TLbsTimeIntervalMiliSeconds</apiname></xref>. A value of 0 disables this feature <i>and is the default if this setting is not set in the repository initialisation file</i>. The maximum value that should be set is <xref href="GUID-6F108DC7-C179-33BE-91E8-3CA069304A0E.dita"><apiname>KLbsMaximumRequestDelayMax</apiname></xref>. Under normal circumstances using values greater than 100ms should not be required and suggests problems with a user application or platform performance (e.g. a high priority process is using nearly 100% of CPU time). </p> <p> <b>Note that this feature may cause very serious side effects (including not up to date locations being reported to the client application) and must NOT be normally used.</b>  </p> </li> <li id="GUID-ECAD8071-D95B-5C89-9D55-E87BA2CA64B7"><p> <codeph>KLbsSpecialFeatureAllowTBFinalNetPos</codeph>  </p> <p>Purpose: This setting defines how the LBS subsystem handles final network position updates. There are two possibilities: </p> <ul><li id="GUID-E85B7AFA-2188-513D-9367-AD279EEBC09B"><p>Setting is <codeph>ESpecialFeatureOn</codeph>  </p> <p>A final network position may be returned to a client if it has a technology type of <codeph>ETechnologyTerminal | ETechnologyAssisted</codeph> OR <codeph>ETechnologyNetwork | ETechnologyAssisted</codeph>. </p> </li> <li id="GUID-26331564-9250-5A44-98B1-966A5EBB61F5"><p>Setting is <codeph>ESpecialFeatureOff</codeph> or is not set in the repository initialisation file </p> <p>A final network position may be returned to the client only if its technology type value given by <xref href="GUID-D5B2E933-209D-3871-8E27-CC5C8855C745.dita#GUID-D5B2E933-209D-3871-8E27-CC5C8855C745/GUID-A01CF36E-6EF9-395A-94DC-AB94478C66BE"><apiname>TPositionInfo::PositionMode()</apiname></xref> is <codeph>ETechnologyNetwork
                     | ETechnologyAssisted</codeph>. A final network position is not returned to a client if its technology type value is <codeph>ETechnologyTerminal |
                     ETechnologyAssisted</codeph>. <i>This is the default behaviour if the setting is not set in the repository initialisation file</i>. </p> </li> </ul> <p>In most situations the value of this setting should be ESpecialFeatureOff. </p> <p>Values: Defined by <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-8737FC10-18A9-36D8-AADF-884602F0EAA6"><apiname>CLbsAdmin::TSpecialFeature</apiname></xref>. See table below. </p> <table id="GUID-E356AA03-53C0-56FC-AE84-56939370FE33"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>TSpecialFeature</entry> <entry>Numerical value</entry> </row> </thead> <tbody><row><entry><p>ESpecialFeatureOn </p> </entry> <entry><p>1</p> </entry> </row> <row><entry><p>ESpecialFeatureOff </p> </entry> <entry><p>2</p> </entry> </row> </tbody> </tgroup> </table> </li> <li id="GUID-6C804962-B64E-501C-80F5-0946DD89E4F7"><p> <codeph>KLbsSpecialFeatureIgnoreAccuracy</codeph>  </p> <p>Purpose: This setting configures LBS to either return only accurate position updates to a client application or to return all position updates including those that do not meet the position quality criteria specified by the client. There are two possibilities: </p> <ul><li id="GUID-086A897B-204A-506A-BE05-C19EB965A743"><p>Setting is <codeph>ESpecialFeatureOn</codeph>  </p> <p>Position updates that do not meet the quality criteria of the calling client are returned (as well as those that do). For full details about the effects of this setting see <xref href="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5.dita">Location Acquisition API runtime behaviour</xref>. </p> </li> <li id="GUID-158556A4-14D2-5781-BFC9-AB5D39194C1D"><p>Setting is <codeph>ESpecialFeatureOff</codeph> or is not set in the repository initialisation file </p> <p> <i>This is the default behaviour if this setting is not set in the repository initialisation file</i>. Generally only those position updates that meet the quality criteria of the calling client are returned. For full details about the effects of this setting see <xref href="GUID-4E56E531-5757-5740-9C7D-705D427FA9D5.dita">Location Acquisition API runtime behaviour</xref>. </p> </li> </ul> <p>Values: Defined by <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-8737FC10-18A9-36D8-AADF-884602F0EAA6"><apiname>CLbsAdmin::TSpecialFeature</apiname></xref>. See table below. </p> <table id="GUID-2BA76B7B-B14A-5D6E-AD90-8CB8BF6E5796"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>TSpecialFeature</entry> <entry>Numerical value</entry> </row> </thead> <tbody><row><entry><p>ESpecialFeatureOn </p> </entry> <entry><p>1</p> </entry> </row> <row><entry><p>ESpecialFeatureOff </p> </entry> <entry><p>2</p> </entry> </row> </tbody> </tgroup> </table> <p> <b>Important note</b>  </p> <p> <b>If KLbsSpecialFeatureIgnoreAccuracy is set to ESpecialFeatureOn then KLbsSpecialFeatureWithholdDeliveryOfReferencePositions must be set to ESpecialFeatureOn.</b>  </p> </li> <li id="GUID-EB195D11-D09B-5FA9-A518-AD8FD7941230"><p> <codeph>KLbsSpecialFeatureWithholdDeliveryOfReferencePositions</codeph> </p> <p>Purpose: This setting specifies if LBS should return reference positions to a client application. There are two possibilities: </p> <ul><li id="GUID-E0E68276-8488-563A-8FFC-BD16900F7B13"><p>Setting is <codeph>ESpecialFeatureOn</codeph>  </p> <p>A reference position is not returned to a client application when a server session is opened using <codeph>RPositioner::Open(RPositionServer&amp; aPosServer, TPositionModuleId
                     aModuleId)</codeph> where <codeph>aModuleId</codeph> specifies a GPS module. </p> </li> <li id="GUID-50E10F03-4FBC-5033-A951-BD8003EBC4E9"><p>Setting is <codeph>ESpecialFeatureOff</codeph> or is not set in the repository initialisation file </p> <p>A reference position can be returned to a client when a location server subsession is opened using any one of the three <xref href="GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575.dita#GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575/GUID-AF3D9B5F-8025-3AFF-A101-82025520EBD6"><apiname>RPositioner::Open()</apiname></xref> methods. <i>This is the default behaviour if this setting is not set in the repository initialisation file.</i>  </p> </li> </ul> <p>Values: Defined by <xref href="GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945.dita#GUID-E8B4B321-6B45-3764-ADD2-CD05A5533945/GUID-8737FC10-18A9-36D8-AADF-884602F0EAA6"><apiname>CLbsAdmin::TSpecialFeature</apiname></xref>. See table below. </p> <table id="GUID-F517755F-BC8B-549E-B19C-DEEDA77C56C8"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>TSpecialFeature</entry> <entry>Numerical value</entry> </row> </thead> <tbody><row><entry><p>ESpecialFeatureOn </p> </entry> <entry><p>1</p> </entry> </row> <row><entry><p>ESpecialFeatureOff </p> </entry> <entry><p>2</p> </entry> </row> </tbody> </tgroup> </table> <p> <b>Important note</b>  </p> <p> <b>If KLbsSpecialFeatureWithholdDeliveryOfReferencePositions is set to ESpecialFeatureOn then KLbsSpecialFeatureIgnoreAccuracy must be set to ESpecialFeatureOn.</b>  </p> </li> <li id="GUID-A31B689A-3293-5BCF-BC0E-745308EE0FE3"><p> <codeph>KLbsSpecialFeatureIntermediateFutileUpdate</codeph>  </p> <p>Purpose: If a licensee's A-GPS module recognises that it will be unable to calculate a GPS fix (for example because it is not receiving a strong enough GPS signal in its current location) it can generate a 'futile' location update by calling <xref href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.dita#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590/GUID-170901F1-435D-3BC1-985B-49BA0876BD92"><apiname>MLbsLocationSourceGpsObserver::UpdateLocation()</apiname></xref> with a status code of <codeph>KPositionCalculationFutile</codeph>. </p> <p>If the location update happens while there is no outstanding location request from the network, the LBS subsystem normally ignores it and does not send it to the network. This is normally the correct behaviour. </p> <p>When the LBS subsystem is operating in Terminal Assisted Mode or simultaneous Terminal Assisted Mode &amp; Terminal Based Mode (also known as Hybrid Mode), turning this setting on enables the LBS subsystem to look for 'futile' updates when there are no outstanding location requests and to return the updates to the network. </p> <p>This feature only applies when the LBS subsystem is working in Terminal Assisted Mode or Hybrid Mode. </p> <p>Values: Defined by <b>CLbsAdmin::TSpecialFeature</b>. See table below. </p> <table id="GUID-92361EFB-3AF2-565A-AD86-9A1BF6A4546F"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>TSpecialFeature</entry> <entry>Numerical value</entry> </row> </thead> <tbody><row><entry><p>ESpecialFeatureOn </p> </entry> <entry><p>1</p> </entry> </row> <row><entry><p>ESpecialFeatureOff </p> </entry> <entry><p>2</p> </entry> </row> </tbody> </tgroup> </table> </li> </ul> </section> <section id="GUID-EC209628-0506-5FF7-B994-232237E007CC"><title>Rebuilding the repository initialisation file</title> <p>The binary (.cre) version of the administration repository initialisation file is generated from the text version by the centrepconv.exe conversion tool. This tool is based on the Symbian emulator and is usually found under <filepath>%EPOCROOT%\epoc32\release\winscw\udeb\centrepconv.exe</filepath>. </p> <p>The following DOS commands copy the text version of the repository file to a location on the Symbian emulator c: drive and then run the conversion tool on it. The generated binary file is copied to the <filepath>&lt;LBS_ROOT&gt;\LbsAdmin\group</filepath> directory. </p> <codeblock id="GUID-7F5F19FD-80EF-5385-AF37-29E0D5FED9FA" xml:space="preserve">REM Set the root directory for LBS – location depends on local configuration

Set LBS_ROOT=&lt;location of the top-level LBS directory&gt;

REM copy the text file to the emulator c:\ drive

copy %LBS_ROOT%\LbsAdmin\data\1028224B.txt %EPOCROOT%\epoc32\winscw\c\1028224B.txt

REM run the conversion tool

pushd %EPOCROOT%\epoc32\release\winscw\udeb
centrepconv.exe –nowait –o c:\1028224B.cre c:\1028224B.txt
popd

REM copy the binary version back to the LbsAdmin directory

copy %EPOCROOT%\epoc32\winscw\c\1028224B.cre %LBS_ROOT%\LbsAdmin\group\1028224B.cre
</codeblock> </section> <section><title>See also</title> <p><xref href="GUID-9348D79B-D4BF-50B0-B787-DDA2765CE058.dita">LBS administration service overview</xref>  </p> <p><xref href="GUID-65448364-0EE6-5903-B2C0-28F49DD2BEA6.dita">How to use the LBS Administration API</xref>  </p> </section> </conbody></concept>