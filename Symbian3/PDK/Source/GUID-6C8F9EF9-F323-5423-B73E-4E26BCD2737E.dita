<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2007-2010 Nokia Corporation and/or its subsidiary(-ies) All rights reserved. -->
<!-- This component and the accompanying materials are made available under the terms of the License 
"Eclipse Public License v1.0" which accompanies this distribution, 
and is available at the URL "http://www.eclipse.org/legal/epl-v10.html". -->
<!-- Initial Contributors:
    Nokia Corporation - initial contribution.
Contributors: 
-->
<!DOCTYPE concept
  PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept xml:lang="en" id="GUID-6C8F9EF9-F323-5423-B73E-4E26BCD2737E"><title>Building and use</title><prolog><metadata><keywords/></metadata></prolog><conbody><p>The TextMTM can be built, deployed on the emulator or native platform, and its functionality experimented with through the messaging application. </p> <p>To do this requires a number of steps: </p> <ul><li id="GUID-0751AD90-2DE5-55BF-B6E0-F14A92D3B7E5"><p>build all TextMTM projects for the relevant target </p> </li> <li id="GUID-3308609B-6B04-5744-93DB-7462888132E7"><p>run the <filepath>txin</filepath> program to register the TextMTM with the Message Server </p> </li> <li id="GUID-667A7812-A797-5447-B953-7C05225B502B"><p>run the messaging application, and experiment with creating and using TextMTM services and messages </p> </li> </ul> <p>The following sections contain more details on each of these. </p> <section><title>Building</title> <p>The TextMTM is more complex than some other examples, as it is made up of a number of projects, some of which include headers from other projects, or link to the utilities DLL <filepath>txut</filepath>. </p> <p>To do a build, perform the normal steps of <codeph>bldmake
          bldfiles</codeph> and <codeph>abld build &lt;target-platform&gt;</codeph>. </p> <p>Note that: </p> <ul><li id="GUID-D2D95328-8AF4-5A39-80BA-8EEEF34C0B37"><p>UI resources and icons for the MTM are built to <filepath>\resource\messaging\</filepath>. </p> </li> <li id="GUID-EB09EE23-8CF3-50EA-8A1D-60BAA4282257"><p>A resource file that provides information to register the MTM with the messaging server is built to <filepath>\resource\messaging\mtm\</filepath>. </p> </li> <li id="GUID-B31F35B5-D9FC-50CB-82AA-E931DDAC38CF"><p>The <filepath>bld.inf</filepath>'s file <codeph>PRJ_EXPORTS</codeph> section lists header files copied into <filepath>\epoc32\include</filepath>. </p> <p>The MTM stores its settings in its own area in the central repository. This requires a repository initialisation file (<filepath>10005247.txt</filepath>) to be supplied. The <filepath>bld.inf</filepath> does this by exporting the file to the central repository private directory <filepath>z:\private\10202BE9\</filepath>. </p> </li> </ul> <p>The final step, registering the MTM, is not performed by the build process, and is described below. </p> </section> <section><title>Registration</title> <p>On the Emulator, you should have run the messaging application at least once before registering the TextMTM, as this creates some necessary folders. </p> <p>Before you can use the TextMTM, you must inform the Message Server of the TextMTM registration data. To do this, run the <filepath>txin</filepath> program, a simple console program. </p> </section> <section><title>Use</title> <p>Start the messaging application in the normal way. You will find that it has automatically detected the presence of the new MTM and added suitable commands to the user interface. For details of the available functionality, see the other documentation on individual TextMTM components, but to get started, try the following: </p> <ul><li id="GUID-38518755-C9E0-509A-8821-85A92C8BA784"><p>Create a new TextMTM service. You will be asked to choose a directory to be mapped to the TextMTM service. </p> <p>Note that directories such as <filepath>\private\</filepath> and <filepath>\sys\</filepath> cannot be used, as platform security requires that access to those directories is restricted. </p> </li> <li id="GUID-A5C05146-BA53-5348-8284-F31D68A0975F"><p>Create a new TextMTM message. As the TextMTM does not include a user interface for message editing and viewing, it simulates this activity by flashing an <systemoutput>Editing</systemoutput> information message. </p> </li> <li id="GUID-F463A532-74E2-5DCB-9BF2-EC539333F171"><p>Select a TextMTM message in a local folder. Check that a special <systemoutput>Export text to file</systemoutput> command appears in the application's menu and use it. </p> </li> <li id="GUID-02036CB1-7F8C-507B-B3D6-E2396C9124F8"><p>Cut, copy, and paste messages between local folders and the service. </p> </li> <li id="GUID-D602FDE7-6C88-5055-8886-676C66AA7C0D"><p>Add and remove files (e.g. through Windows Explorer when using the Emulator) manually from the directory mapped to the TextMTM service. In messaging, go to the service and see that a special <systemoutput>Refresh
                service</systemoutput> menu command appears. Use this and check that the service now accurately reflects the state of the directory. </p> </li> </ul> </section> </conbody></concept>