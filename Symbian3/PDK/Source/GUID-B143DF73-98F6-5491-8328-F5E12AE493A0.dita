<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2007-2010 Nokia Corporation and/or its subsidiary(-ies) All rights reserved. -->
<!-- This component and the accompanying materials are made available under the terms of the License 
"Eclipse Public License v1.0" which accompanies this distribution, 
and is available at the URL "http://www.eclipse.org/legal/epl-v10.html". -->
<!-- Initial Contributors:
    Nokia Corporation - initial contribution.
Contributors: 
-->
<!DOCTYPE reference
  PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<reference xml:lang="en" id="GUID-B143DF73-98F6-5491-8328-F5E12AE493A0"><title> PNOK Messages</title><abstract><shortdesc>This document describes the PNOK messages supported by the Bluetooth GPS PSY. </shortdesc> <p>The target audiences for this document are device creators and GPS hardware vendors who want to know which PNOK messages are sent from the PSY to a GPS device and which messages the PSY expects to receive from the device. </p> </abstract><prolog><metadata><keywords/></metadata></prolog><refbody><section><title>Introduction</title> <p>The Bluetooth GPS PSY supports Nokia PNOK extensions to the NMEA 0183 standard. </p> <p>The PSY polls the Bluetooth GPS device to check if it supports PNOK. If it does, PNOK messages beginning with the string <codeph>$PNOK</codeph> are used instead of the NMEA <codeph>$PSRF</codeph> messages described in <xref href="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8.dita">NMEA messages</xref>. </p> <p>The PNOK messages used for communication between the PSY and a GPS device are listed in the following sections. </p> </section> <section><title>Required background</title> <p>Knowledge of the<xref scope="external" href="http://www.nmea.org/content/nmea_standards/nmea_standards.asp">The NMEA 0183 Protocol</xref> is helpful in understanding this document. Knowledge of the PNOK protocol is required. </p> </section> <section><title>PNOK query message</title> <p>The PSY sends the message <codeph>$PNOK*1A\r\n</codeph> to the GPS device to query support for PNOK. </p> <p>The GPS device returns an <codeph>OK</codeph> message if it supports PNOK. </p> </section> <section><title>GPS initialisation messages</title> <p>The messages <codeph>GPGGA, GPRMC, GPGSV, GPGSA</codeph> and <codeph>STAT</codeph> are turned on with an update interval of one second. See NMEA message for a brief description of the meaning of the NMEA messages. The message STAT requests periodic updates. </p> <p>Message : <codeph>$PNOK,MSGS,1,1,1,1,,,1*21\r\n</codeph>. </p> </section> <section><title>Power saving mode message</title> <p>When the PSY initialises the GPS device, it sends the message <codeph>LOWPWR</codeph> to turn on GPS power saving mode. </p> <p>Message: <codeph>$PNOK,LOWPWR,1*2A\r\n</codeph>. </p> </section> <section><title>Night Mode message</title> <p> <i>Night Mode</i> sets any device display or indicators for use in dark conditions. A GPS device may darken its display when it receives a Night Mode on message. </p> <p>Message for setting night mode off: <codeph>$PNOK,NIGHTMODE,0*75\r\n</codeph>. </p> <p>Message for setting night mode on: <codeph>$PNOK,NIGHTMODE,1*74\r\n</codeph>. </p> </section> <section><title>Hardware and software version messages</title> <p>The PSY sends the message VER to request Bluetooth and GPS hardware and software versions. </p> <p>Message: <codeph>$PNOK,VER*77\r\n</codeph>. </p> </section> <section><title>Messages summary</title> <p>This section describes the messages the PSY sends and receives from a GPS device. </p> <p><b>Command and confirmation messages</b> </p> <p>The table below lists the command messages sent from the PSY and confirmation messages sent from the GPS device. </p> <table id="GUID-E54EC600-29D3-508F-B63B-5B41813F8876"><tgroup cols="2"><colspec colname="col0"/><colspec colname="col1"/><thead><row><entry>PNOK message</entry> <entry>Meaning</entry> </row> </thead> <tbody><row><entry><p>OK </p> </entry> <entry><p>GPS device supports PNOK messages </p> </entry> </row> <row><entry><p>MSGS </p> </entry> <entry><p>Set NMEA messages to return periodically </p> </entry> </row> <row><entry><p>LOWPWR </p> </entry> <entry><p>Low power mode </p> </entry> </row> <row><entry><p>NIGHTMODE </p> </entry> <entry><p>Current night mode status </p> </entry> </row> <row><entry><p>VER </p> </entry> <entry><p>Version information </p> </entry> </row> <row><entry><p>TIME </p> </entry> <entry><p>Reference time </p> </entry> </row> </tbody> </tgroup> </table> <p><b>Event messages</b> </p> <p>The STAT message is sent from hardware to the PSY to return periodic status information. </p> </section> </refbody></reference>