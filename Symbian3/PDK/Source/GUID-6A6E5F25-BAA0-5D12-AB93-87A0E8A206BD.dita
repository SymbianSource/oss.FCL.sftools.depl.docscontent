<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) 2007-2010 Nokia Corporation and/or its subsidiary(-ies) All rights reserved. -->
<!-- This component and the accompanying materials are made available under the terms of the License 
"Eclipse Public License v1.0" which accompanies this distribution, 
and is available at the URL "http://www.eclipse.org/legal/epl-v10.html". -->
<!-- Initial Contributors:
    Nokia Corporation - initial contribution.
Contributors: 
-->
<!DOCTYPE concept
  PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept xml:lang="en" id="GUID-6A6E5F25-BAA0-5D12-AB93-87A0E8A206BD"><title>Architecture</title><shortdesc>This topic describes the architectural relationship between the telephony watcher classes. </shortdesc><prolog><metadata><keywords/></metadata></prolog><conbody><p>The telephony watcher is contains two main components: </p> <ul><li id="GUID-96A8E9D6-80F2-52CD-AA81-7E964225A27F"><p>The watcher framework </p> </li> <li id="GUID-F6AE977C-86FF-51CB-9872-4B8DAEA5EB64"><p>Watcher plug-ins </p> </li> </ul> <fig id="GUID-840FA659-314A-538C-8ACF-12D905DCFF2E"><title>
          Telephony Watcher Framework - Architectural Relationships 
        </title> <image href="GUID-41F5F258-5B2A-57E2-BEB4-EBDE1008C833_d0e62225_href.png" placement="inline"/></fig> <p>In the diagram the core low level functionality is the publish and subscribe mechanism. The client applications must use the <xref href="GUID-C4776034-D190-3FC4-AF45-C7F195093AC3.dita"><apiname>RProperty</apiname></xref> functions to get the notifications. Telephony watcher functionality is the watcher framework. </p> <section id="GUID-DBF1C87D-7360-54B7-8658-B6659BF77F06-GENID-1-7-1-5-1-1-10-1-5-1-3-1-3-1-3-5"><title>The watcher framework</title> <p>The watcher framework is provided by watcher.exe. The watcher and the plug-in run in the same thread. The telephony watcher framework does the following: </p> <ul><li id="GUID-A1F19485-9E33-5885-858C-AEF3CFED94E3"><p>creates and starts the plug-in objects </p> </li> <li id="GUID-F6B33292-D3E4-5C74-932D-2A48B8CFA127"><p>provides an asynchronous interface for the plug-ins </p> </li> <li id="GUID-B7D3021B-A2C5-5B33-99AC-0BD0C924F4D5"><p>creates the communication link with the telephony server to get the information </p> </li> <li id="GUID-ED29C6ED-D00A-5FB8-8360-B35591525235"><p>maintains the plug-ins and the watcher framework in the same thread </p> </li> <li id="GUID-73E81301-0A43-5278-A9F2-05731B821A09"><p>provides updates to the client applications </p> </li> <li id="GUID-58D4FACB-98DD-5732-9D39-482B55240822"><p>provides error corrections in the communication between the watcher framework and the telephony server </p> </li> <li id="GUID-0073A1B0-50A2-5AC9-B525-A590CCAEC721"><p>uses the comms debug utility to log the events </p> </li> <li id="GUID-20D4749F-8811-54E2-AEB8-52E17787EA3E"><p>deletes the plug-in objects </p> </li> </ul> </section> <section><title>Watcher Plug-ins</title> <p>The watcher plug-ins are loaded by the watcher framework. The plug-ins are implemented as DLLs. The primary functions of the watchers are to monitor the telephony activities and publish the information with the publish and subscribe. The two watcher plug-ins are: </p> <ul><li id="GUID-D779ECDD-51BD-58B6-99E5-6C43012DE4EA"><p>Signal Strength Watcher </p> </li> <li id="GUID-C3615A38-37C1-5A50-87DC-08D701C6CBE5"><p>Call Indicator Watcher </p> </li> </ul> </section> </conbody><related-links><link href="GUID-D83D00F3-EF62-57F7-8FC6-549615C37710.dita"><linktext>Telephony Watchers</linktext> </link> </related-links></concept>